


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="SPMV-based Conjugate Gradient Solver with Jacobi Preconditioner" href="cg_spmv_jacobi.html" />
    <link rel="prev" title="CG Kernels" href="../L2_cg.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home" alt="Documentation Home"> Vitis HPC Library
          

          
          </a>

          
            
            
              <div class="version">
                2021.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">Library Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../overview.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview.html#license">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../overview.html#trademark-notice">Trademark Notice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release.html">Release Note</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../pyenvguide.html">Python Environment Setup Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../L1/L1.html">L1 Primitives User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../L2.html">L2 Kernels User Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../L2_overview.html">Introduction of L2 Kernels</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../L2_rtm.html">RTM Kernels</a></li>
<li class="toctree-l3"><a class="reference internal" href="../L2_mlp.html">MLP Kernels</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../L2_cg.html">CG Kernels</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../L2_cg.html#usage-and-benchmark">Usage and Benchmark</a><ul class="current">
<li class="toctree-l5 current"><a class="current reference internal" href="#">GEMV-based Conjugate Gradient Solver with Jacobi Preconditioner</a></li>
<li class="toctree-l5"><a class="reference internal" href="cg_spmv_jacobi.html">SPMV-based Conjugate Gradient Solver with Jacobi Preconditioner</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../L2_apis.html">L2 Kernel APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../L2_test.html">L2 Kernels Tests Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../L3/L3.html">L3 RTM API User Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Benchmark</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../benchmark.html">Benchmark</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../../../_sources/user_guide/L2/benchmark/cg_gemv_jacobi.rst.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Vitis HPC Library</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../L2.html">L2 Kernels User Guide</a> &raquo;</li>
        
          <li><a href="../L2_overview.html">Introduction of L2 Kernels</a> &raquo;</li>
        
          <li><a href="../L2_cg.html">CG Kernels</a> &raquo;</li>
        
      <li>GEMV-based Conjugate Gradient Solver with Jacobi Preconditioner</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/user_guide/L2/benchmark/cg_gemv_jacobi.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="gemv-based-conjugate-gradient-solver-with-jacobi-preconditioner">
<h1>GEMV-based Conjugate Gradient Solver with Jacobi Preconditioner<a class="headerlink" href="#gemv-based-conjugate-gradient-solver-with-jacobi-preconditioner" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>CG solver is widely adopted to solve linear system Ax=b, where the matrix A is symmetric and positive definite.
Here is the benchmark for GEMV-based CG solver with the Jacobi preconditioner on Xilinx FPGA Alveo U50.</p>
</div>
<div class="section" id="executable-usage">
<h2>Executable Usage<a class="headerlink" href="#executable-usage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="environment-setup-step-1">
<h3>Environment Setup (Step 1)<a class="headerlink" href="#environment-setup-step-1" title="Permalink to this headline">¶</a></h3>
<p>Please follow the page <a class="reference internal" href="../../../benchmark.html"><span class="doc">Benchmark Overview</span></a> to correctly setup the environment first.</p>
</div>
<div class="section" id="build-kernel-step-2">
<h3>Build Kernel (Step 2)<a class="headerlink" href="#build-kernel-step-2" title="Permalink to this headline">¶</a></h3>
<p>With the following commands, kernel bitstream <em>cgSolver.xclbin</em> is built under the directory <em>./build_dir.hw.xilinx_u50_gen3x16_xdma_201920_3</em></p>
<pre class="highlight literal-block">
<span></span>$ make build <span class="nv">TARGET</span><span class="o">=</span>hw <span class="nv">DEVICE</span><span class="o">=</span>xilinx_u50_gen3x16_xdma_201920_3
</pre>
</div>
<div class="section" id="prepare-data-step-3">
<h3>Prepare Data (Step 3)<a class="headerlink" href="#prepare-data-step-3" title="Permalink to this headline">¶</a></h3>
<p>To benchmark the kernel, there two ways to prepare the data.</p>
<div class="section" id="randomly-generated-data-optional">
<h4>Randomly-Generated Data (Optional)<a class="headerlink" href="#randomly-generated-data-optional" title="Permalink to this headline">¶</a></h4>
<p>You could safely skip this step as it is integrated with the one in the next step if you choose to use random data for the benchmark.
Here states the principle of how it works.  With the following commands with given vector size e.g. 1024,  three data files are generated under directory <em>./build_dir.hw.xilinx_u50_gen3x16_xdma_201920_3/data/</em>.</p>
<ol class="arabic simple">
<li>It generates a random <strong>SPD</strong> matrix of size <em>NxN</em> with data type FP64 and then stores the data in a row-major to file <em>A.mat</em>.</li>
<li>It generates a random FP64 vector of size <em>N</em> and then compute vector <em>b = Ax</em>.</li>
<li>The two vectors are stored into files <em>x.mat</em> and <em>b.mat</em> respectively.</li>
</ol>
<p>Matrix <em>A</em> and vector <em>b</em> are used as inputs for the solver, and vector <em>x</em> is used as the golden reference.</p>
<pre class="highlight literal-block">
<span></span>$ make data_gen <span class="nv">TARGET</span><span class="o">=</span>hw <span class="nv">DEVICE</span><span class="o">=</span>xilinx_u50_gen3x16_xdma_201920_3 <span class="nv">N</span><span class="o">=</span><span class="m">1024</span>
</pre>
<p>where <em>N</em> is the vector size and must be multiple of 16.</p>
</div>
<div class="section" id="users-data">
<h4>Users’ data<a class="headerlink" href="#users-data" title="Permalink to this headline">¶</a></h4>
<p>Users could prepare their own data for benchmark.
1.      Please prepare a <strong>SPD</strong> matrix with double precision floating point data type.
2.      Please prepare golden reference vector and result vector which is the product of the matrix and the golden reference.
3.      Please make sure the matrix size is <em>NxN</em> and vector size is <em>N</em>
4.      Please make sure*N* is multiple of 16.
5.      Please store the matrix, golden reference vector and result vector to binary files named  <em>A.mat</em>, <em>x.mat</em> and <em>b.mat</em> respectively, and place them into a directory.</p>
</div>
</div>
<div class="section" id="run-on-fpga-with-example-data-step-4">
<h3>Run on FPGA with Example Data (Step 4)<a class="headerlink" href="#run-on-fpga-with-example-data-step-4" title="Permalink to this headline">¶</a></h3>
<div class="section" id="check-device">
<h4>Check Device<a class="headerlink" href="#check-device" title="Permalink to this headline">¶</a></h4>
<p>If you followed the guide and correctly setup the environment, you are able to run the following command line. You could check whether the target device is prepared and find out the device ID.</p>
<pre class="highlight literal-block">
<span></span>$ xbutil scan
</pre>
</div>
<div class="section" id="benchmark-random-dataset">
<h4>Benchmark Random Dataset<a class="headerlink" href="#benchmark-random-dataset" title="Permalink to this headline">¶</a></h4>
<p>If you decide to use randomly generated data for benchmark in step 3, you could skip that step and run the following command with given vector size <em>N</em>, e.g. 1024 and maximum number of iterations for the solver e.g. 100.</p>
<pre class="highlight literal-block">
<span></span>$ make run <span class="nv">TARGET</span><span class="o">=</span>hw <span class="nv">DEVICE</span><span class="o">=</span>xilinx_u50_gen3x16_xdma_201920_3 <span class="nv">N</span><span class="o">=</span><span class="m">1024</span> <span class="nv">maxIter</span><span class="o">=</span><span class="m">100</span> <span class="nv">deviceID</span><span class="o">=</span><span class="m">0</span>
</pre>
<p>Here lists the configurable parameters with the <em>make</em> command for the benchmark.</p>
<table border="1" class="docutils align-center" id="id1">
<caption><span class="caption-text">Parameters with make command</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="21%" />
<col width="19%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter Name</th>
<th class="head">Default Value</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>N</td>
<td>1024</td>
<td>Vector size, must be multiple of 16</td>
</tr>
<tr class="row-odd"><td>maxIter</td>
<td>100</td>
<td>Maximum No. iterations for the solver &lt;= 2000</td>
</tr>
<tr class="row-even"><td>tol</td>
<td>1e-12</td>
<td>Fault Tolerance</td>
</tr>
<tr class="row-odd"><td>deviceID</td>
<td>0</td>
<td>Alveo U50 Card ID</td>
</tr>
<tr class="row-even"><td>condition_num</td>
<td>128</td>
<td>Conditioner number for matrix generated</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="usage">
<h4>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h4>
<p>For users’ own data, follow the usage specified bellow.</p>
<pre class="highlight literal-block">
<span></span>Usage: host.exe &lt;XCLBIN File&gt; &lt;Max Iteration&gt; &lt;Vector Size&gt; &lt;DATA PATH&gt; <span class="o">[</span>device id<span class="o">]</span>
            &lt;XCLBIN File&gt;       path to the xclbin file
            &lt;Max Iteration&gt;     maximum number of iterations
            &lt;Tolerence&gt;         Fault tolerence
            &lt;Vector Size&gt;       size of vector, matrix size N x N
            &lt;DATA PATH&gt;         path to the matrix and vector binary files
            &lt;device id&gt;         Device id given
</pre>
</div>
</div>
</div>
<div class="section" id="resource-utilization">
<h2>Resource Utilization<a class="headerlink" href="#resource-utilization" title="Permalink to this headline">¶</a></h2>
<p>The following table lists the resource utilization for GEMV-based CG kernel with 16 HBM channels storing the matrix.</p>
<table border="1" class="docutils align-center" id="id2">
<caption><span class="caption-text">Resource Utilization on U50</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="22%" />
<col width="14%" />
<col width="14%" />
<col width="15%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">LUT</th>
<th class="head">LUTAsMem</th>
<th class="head">REG</th>
<th class="head">BRAM</th>
<th class="head">URAM</th>
<th class="head">DSP</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>User Budget</td>
<td>699619 [100.00%]</td>
<td>369603 [100.00%]</td>
<td>1447189 [100.00%]</td>
<td>1112 [100.00%]</td>
<td>640 [100.00%]</td>
<td>5936 [100.00%]</td>
</tr>
<tr class="row-odd"><td>Used Resources</td>
<td>186448 [ 26.65%]</td>
<td>17334 [  4.69%]</td>
<td>325149 [ 22.47%]</td>
<td>128 [ 11.51%]</td>
<td>0 [  0.00%]</td>
<td>1262 [ 21.26%]</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="benchmark-results-on-alveo-u50-fpga">
<h2>Benchmark Results on Alveo U50 FPGA<a class="headerlink" href="#benchmark-results-on-alveo-u50-fpga" title="Permalink to this headline">¶</a></h2>
<p>CPU Hardware information</p>
<ul class="simple">
<li>Model name: Intel(R) Xeon(R) CPU E5-2667 v4 &#64; 3.20GHz</li>
<li>Total threads: 32, Threads/Core: 2, Cores/Socket: 8, Total sockets: 2, Total Cores:16</li>
</ul>
<p>FPGA Hardware Information</p>
<ul class="simple">
<li>Device name:  Xilinx Alveo U50</li>
<li>Fmax: 333MHz</li>
<li>Idle power 24W</li>
</ul>
<table border="1" class="docutils align-center" id="id3">
<caption><span class="caption-text">Benchmark Results on U50</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="9%" />
<col width="17%" />
<col width="19%" />
<col width="23%" />
<col width="18%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Vector Size</th>
<th class="head">Time per Iteration [ms]</th>
<th class="head">U50 Performance [GFLOPS]</th>
<th class="head">U50 Energy Efficiency [GFLOPS/W]</th>
<th class="head">CPU Performance [GFLOPS]</th>
<th class="head">Acceleration Ratio</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1024</td>
<td>0.073</td>
<td>26.938</td>
<td>0.723</td>
<td>12.996</td>
<td>2.073</td>
</tr>
<tr class="row-odd"><td>2048</td>
<td>0.2557</td>
<td>30.658</td>
<td>0.766</td>
<td>27.469</td>
<td>1.116</td>
</tr>
<tr class="row-even"><td>4096</td>
<td>0.9202</td>
<td>34.018</td>
<td>0.812</td>
<td>7.776</td>
<td>4.375</td>
</tr>
<tr class="row-odd"><td>8192</td>
<td>3.405</td>
<td>36.742</td>
<td>0.839</td>
<td>8.226</td>
<td>4.467</td>
</tr>
</tbody>
</table>
<div class="section" id="power-consumption-on-fpga">
<h3>Power Consumption on FPGA<a class="headerlink" href="#power-consumption-on-fpga" title="Permalink to this headline">¶</a></h3>
<p>Power data could be obtained by</p>
<pre class="highlight literal-block">
<span></span>$ xbutil top -d &lt;DEVICE ID&gt;
</pre>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cg_spmv_jacobi.html" class="btn btn-neutral float-right" title="SPMV-based Conjugate Gradient Solver with Jacobi Preconditioner" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../L2_cg.html" class="btn btn-neutral float-left" title="CG Kernels" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2019, Xilinx Inc.
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>