


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Introduction" href="L2/1-introduction.html" />
    <link rel="prev" title="1-Dimensional(Line) SSR FFT L1 FPGA Module" href="L1.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Vitis DSP Library
          

          
          </a>

          
            
            
              <div class="version">
                2021.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">Library Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html#license">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html#trademark-notice">Trademark Notice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release Note</a></li>
</ul>
<p class="caption"><span class="caption-text">L1 PL DSP Library User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="L1.html">1-Dimensional(Line) SSR FFT L1 FPGA Module</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2-Dimensional(Matrix) SSR FFT L1 FPGA Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#block-level-interface">Block Level Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#d-ssr-fft-architecture">2-D SSR FFT Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supported-data-types">Supported Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#l1-api-for-2-d-ssr-fft">L1 API for 2-D SSR FFT</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#template-parameters">Template Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#constraints-on-the-choice-of-template-parameters">Constraints on the Choice of Template Parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#library-usage">Library Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#fixed-point-2-d-ssr-fft-l1-module-usage">Fixed Point 2-D SSR FFT L1 Module Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#floating-point-2-d-ssr-fft-l1-module-usage">Floating Point 2-D SSR FFT L1 Module Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#d-ssr-fft-examples">2-D SSR FFT Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#d-fixed-point-example">2-D Fixed Point Example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#top-level-definition-and-main-function">Top Level Definition and main Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compiling-and-building-example-hls-project">Compiling and Building Example HLS Project</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#d-floating-point-example">2-D Floating Point Example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Top Level Definition and main Function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">Compiling and Building Example HLS Project</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#d-ssr-fft-tests">2-D SSR FFT Tests</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#launching-an-individual-test">Launching an Individual Test</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">L2 DSP Library User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="L2/1-introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="L2/2-dsp-lib-func.html">DSP Library Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="L2/3-using-examples.html">Using the Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="L2/5-benchmark.html">Benchmark/QoR</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="L2/4-api-reference.html">API Reference Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rst/class_xf_dsp_aie_fir_sr_asym_fir_sr_asym_graph.html">fir_sr_asym_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rst/class_xf_dsp_aie_fir_sr_sym_fir_sr_sym_graph.html">fir_sr_sym_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rst/class_xf_dsp_aie_fir_interpolate_asym_fir_interpolate_asym_graph.html">fir_interpolate_asym_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rst/class_xf_dsp_aie_fir_decimate_hb_fir_decimate_hb_graph.html">fir_decimate_hb_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rst/class_xf_dsp_aie_fir_interpolate_hb_fir_interpolate_hb_graph.html">fir_interpolate_hb_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rst/class_xf_dsp_aie_fir_decimate_asym_fir_decimate_asym_graph.html">fir_decimate_asym_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rst/class_xf_dsp_aie_fir_interpolate_fract_asym_fir_interpolate_fract_asym_graph.html">fir_interpolate_fract_asym_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rst/class_xf_dsp_aie_fir_decimate_sym_fir_decimate_sym_graph.html">fir_decimate_sym_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rst/class_xf_dsp_aie_blas_matrix_mult_matrix_mult_graph.html">matrix_mult_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rst/class_xf_dsp_aie_fft_dit_1ch_fft_ifft_dit_1ch_base_graph.html">fft_ifft_dit_1ch_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rst/class_xf_dsp_aie_widget_api_cast_widget_api_cast_graph.html">widget_api_cast_graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rst/class_xf_dsp_aie_widget_real2complex_widget_real2complex_graph.html">widget_real2complex_graph</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="../_sources/user_guide/L1_2dfft.rst.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Vitis DSP Library</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>2-Dimensional(Matrix) SSR FFT L1 FPGA Module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/user_guide/L1_2dfft.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="toctree-wrapper compound" id="l1-2dfft-label">
<p class="caption"><span class="caption-text">Table of Contents</span><a class="headerlink" href="#l1-2dfft-label" title="Permalink to this toctree">¶</a></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">2-Dimensional(Matrix) SSR FFT L1 FPGA Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#block-level-interface">Block Level Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#d-ssr-fft-architecture">2-D SSR FFT Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supported-data-types">Supported Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#l1-api-for-2-d-ssr-fft">L1 API for 2-D SSR FFT</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#template-parameters">Template Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#constraints-on-the-choice-of-template-parameters">Constraints on the Choice of Template Parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#library-usage">Library Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#fixed-point-2-d-ssr-fft-l1-module-usage">Fixed Point 2-D SSR FFT L1 Module Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#floating-point-2-d-ssr-fft-l1-module-usage">Floating Point 2-D SSR FFT L1 Module Usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#d-ssr-fft-examples">2-D SSR FFT Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#d-fixed-point-example">2-D Fixed Point Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#d-floating-point-example">2-D Floating Point Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#d-ssr-fft-tests">2-D SSR FFT Tests</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="dimensional-matrix-ssr-fft-l1-fpga-module">
<h1>2-Dimensional(Matrix) SSR FFT L1 FPGA Module<a class="headerlink" href="#dimensional-matrix-ssr-fft-l1-fpga-module" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Vitis DSP library provides a fully synthesizable 2-Dimensional Fast Fourier Transform(FFT) as an L1 primitive.
This L1 primitive is designed to be easily transformed into an L2 Vitis kernel by adding memory adapters.
The L1 primitive is designed to have an array of stream interface, as wide as device DDR memory
widths on boards like Xilinx U200, U250 and U280. Adding memory adapters requires a plugin at the SSR FFT input
side which has AXI interface for connection with DDR memory on one side and other sides need to have
memory wide streaming interface to connect with the 2-D SSR FFT L1 primitive. A second memory plugin is required
at the output side of the SSR FFT, which reads in an array of stream data and connects it to the output AXI interface
for DDR memory connection.</p>
</div>
<div class="section" id="block-level-interface">
<h2>Block Level Interface<a class="headerlink" href="#block-level-interface" title="Permalink to this headline">¶</a></h2>
<p>The figure below shows the block level interface for 2-D SSR FFT. Essentially it is an array of
stream interface at the input and the output.</p>
<a class="reference internal image-reference" href="../_images/2-2d_fft_if.jpg"><img alt="doc tool flow" class="align-center" src="../_images/2-2d_fft_if.jpg" style="width: 30%;" /></a>
</div>
<div class="section" id="d-ssr-fft-architecture">
<h2>2-D SSR FFT Architecture<a class="headerlink" href="#d-ssr-fft-architecture" title="Permalink to this headline">¶</a></h2>
<p>2-Dimensional SSR FFT is built on top of 1-D SSR FFT. It deploys multiple 1-D SSR FFT processors in parallel to
accelerate calculations. Potentially 2-D SSR FFT can be accelerated by deploying multiple processors in
parallel, to process multiple lines(rows/columns) of input data whose 1-D SSR FFT calculation is independent of each other (Data parallelism).
Essentially decreasing the latency and also increasing the throughput. But 2-D SSR FFT throughput can
also be increased by using a task level pipeline where one set of 1-D SSR FFT processors also called line
processors work row wise on 2-D input data and another set of line processors work column wise in a task level
pipeline on data produced by row processors as shown in the figure below. The row processors perform 1-D SSR FFT row by row and column processors
perform transforms on columns. Row processors connect to column processors through a matrix transposer.
The following figure shows a simplified block diagram which gives the 2-D SSR FFT architecture used by the Vitis SSR FFT
Library. Essentially it is a big dataflow pipeline of blocks which perform data permutations and 1-D FFT transforms
working either row wise or column wise. Each of the 1-D SSR FFT processor ( <a class="reference internal" href="L1.html#l1-fft-label"><span class="std std-ref">1-D Vitis SSR FFT</span></a> ) is a Super
Sample Rate streaming processor. The 1-D SSR FFT processors used along the rows and columns are supposed to have same configuration which
is specified as described in <a class="reference internal" href="L1.html#float-fft-params-struct-label"><span class="std std-ref">Configuration Parameter Structure for Floating Point SSR FFT</span></a></p>
<a class="reference internal image-reference" href="../_images/3-2d_fft_blk_dia.jpg"><img alt="doc tool flow" class="align-center" src="../_images/3-2d_fft_blk_dia.jpg" style="width: 30%;" /></a>
</div>
<div class="section" id="supported-data-types">
<h2>Supported Data Types<a class="headerlink" href="#supported-data-types" title="Permalink to this headline">¶</a></h2>
<p>2-D SSR FFT currently supports <strong>complex&lt;float&gt;</strong> and <strong>complex&lt;ap_fixed&lt;&gt;&gt;</strong> type for simulation and synthesis.
Also currently Vitis SSR FFT library doesn’t support standard std::complex&lt;float&gt; instead a complex_wrapper class
in shipped with the Vitis SSR FFT library that can be used for simulation and synthesis.</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="31%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Supported for Synthesis</th>
<th class="head">Supported for Simulation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>complex_wrapper&lt;float&gt;</td>
<td>YES</td>
<td>YES</td>
</tr>
<tr class="row-odd"><td>complex_wrapper&lt;ap_fixed&lt;&gt;&gt;</td>
<td>YES</td>
<td>YES</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="l1-api-for-2-d-ssr-fft">
<span id="d-fft-template-params-label"></span><h2>L1 API for 2-D SSR FFT<a class="headerlink" href="#l1-api-for-2-d-ssr-fft" title="Permalink to this headline">¶</a></h2>
<p>2-D SSR FFT is provided as a template function given below:</p>
<pre class="highlight literal-block">
<span></span><span class="k">template</span> <span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">t_memWidth</span><span class="p">,</span>
        <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">t_numRows</span><span class="p">,</span>
        <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">t_numCols</span><span class="p">,</span>
        <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">t_numKernels</span><span class="p">,</span>
        <span class="k">typename</span> <span class="n">t_ssrFFTParamsRowProc</span><span class="p">,</span>
        <span class="k">typename</span> <span class="n">t_ssrFFTParamsColProc</span><span class="p">,</span>
        <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">t_rowInstanceIDOffset</span><span class="p">,</span>
        <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">t_colInstanceIDOffset</span><span class="p">,</span>
        <span class="k">typename</span> <span class="n">T_elemType</span> <span class="c1">// complex element type</span>
        <span class="o">&gt;</span>
<span class="kt">void</span> <span class="n">fft2d</span><span class="p">(</span><span class="n">hls</span><span class="o">::</span><span class="n">stream</span><span class="o">&lt;</span><span class="n">WideInputType</span><span class="o">&gt;</span> <span class="p">,</span> <span class="n">hls</span><span class="o">::</span><span class="n">stream</span><span class="o">&lt;</span><span class="n">WideOutputType</span><span class="o">&gt;</span><span class="p">);</span>
</pre>
<div class="section" id="template-parameters">
<h3>Template Parameters<a class="headerlink" href="#template-parameters" title="Permalink to this headline">¶</a></h3>
<p>Function: fft2d is the top level L1 API provided which takes a number of template parameters and in/out streams. These template
functions describe the architecture and the data-path of 1-D SSR FFT processors deployed as line processors. The
description of these parameters is as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Template Parameter</th>
<th class="head">Functionality</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>t_memWidth</td>
<td>Describes the width of wide stream in complex&lt;T_elemType&gt; words</td>
</tr>
<tr class="row-odd"><td>t_numRows</td>
<td>Number of rows in 2-D FFT input data (currently limited to 256)</td>
</tr>
<tr class="row-even"><td>t_numCols</td>
<td>Number of column in 2-D FFT input data (currently limited to 256)</td>
</tr>
<tr class="row-odd"><td>t_numKernels</td>
<td>Number of parallel kernels used to process rows/columns</td>
</tr>
<tr class="row-even"><td>t_ssrFFTParamsRowProc</td>
<td>Configuration parameter structure for row processors</td>
</tr>
<tr class="row-odd"><td>t_ssrFFTParamsColProc</td>
<td>Configuration parameter structure for column processors</td>
</tr>
<tr class="row-even"><td>t_rowInstanceIDOffset</td>
<td>Instance ID offset for row processors</td>
</tr>
<tr class="row-odd"><td>t_colInstanceIDOffset</td>
<td>Instance ID offset for column processors</td>
</tr>
<tr class="row-even"><td>T_elemType</td>
<td>The inner type for complex wrapper</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>t_memWidth:   Gives the width of wide stream in complex&lt;inner_type&gt; words can be calculated as: t_memWidth=(wide stream size in bits)/(sizeof(complex&lt;T_elemType&gt;)*8))</li>
<li>t_numRows:    2-D SSR FFT processes a matrix the number of rows in input matrix are given by t_numRows</li>
<li>t_numCols:    2-D SSR FFT processes a matrix the number of columns in input matrix are given by t_numCols</li>
<li>t_numKernels: 2-D SSR FFT can deploy multiple 1-D SSR FFT processors along rows and columns to processes numerous row/columns in parallel this paramter gives number of processors to be used along rows/columns. Number of columns used along rows and columns are same and equal t_numKernels</li>
<li>t_ssrFFTParamsRowProc: It is a structure of parameters that describes tranform direction, data-path etc for row processors. The details of configuration parameter structures can be found here <a class="reference internal" href="L1.html#float-fft-params-struct-label"><span class="std std-ref">Configuration Parameter Structure for Floating Point SSR FFT</span></a> for fixed point case (currently not supported) it is <a class="reference internal" href="L1.html#fixed-fft-params-struct-label"><span class="std std-ref">Configuration Parameter Structure for Fixed Point SSR FFT</span></a></li>
<li>t_ssrFFTParamsColProc: It is a structure of parameters that describes tranform direction, data-path etc for column processors. The details of configuration parameter structures can be found here <a class="reference internal" href="L1.html#float-fft-params-struct-label"><span class="std std-ref">Configuration Parameter Structure for Floating Point SSR FFT</span></a> for fixed point case (currently not supported) it is <a class="reference internal" href="L1.html#fixed-fft-params-struct-label"><span class="std std-ref">Configuration Parameter Structure for Fixed Point SSR FFT</span></a></li>
<li>t_rowInstanceIDOffset: 2-D SSR FFT deploys multiple 1D SSR FFT processors and it is required that every 1D SSR FFT proessor has a unique ID. If ‘M’ processors are used along rows then their IDs will be in the range: (t_rowInstanceIDOffset+1 , t_rowInstanceIDOffset+M) the selection of offset for rows and columns should be made such that these ranges are unique without any overlap. Essentially it requires that <strong>abs(t_rowInstanceIDOffset - t_colInstanceIDOffset) &gt; M</strong></li>
<li>t_colInstanceIDOffset: 2-D SSR FFT deploys multiple 1D SSR FFT processors and it is required that every 1D SSR FFT proessor has a unique ID. If ‘M’ processors are used along rows then their IDs will be in the range: (t_rowInstanceIDOffset+1 , t_rowInstanceIDOffset+M) the selection of offset for rows and columns should be made such that these ranges are unique without any overlap. Essentially it requires that <strong>abs(t_rowInstanceIDOffset - t_colInstanceIDOffset) &gt; M</strong></li>
<li>T_elemType: 2-D SSR FFT processes complex samples and T_elemType gives the inner type used to store real and imaginary parts. Currently it supports only float as inner type for simulation and synthesis.</li>
</ul>
</div>
<div class="section" id="constraints-on-the-choice-of-template-parameters">
<h3>Constraints on the Choice of Template Parameters<a class="headerlink" href="#constraints-on-the-choice-of-template-parameters" title="Permalink to this headline">¶</a></h3>
<p>Currently the template paramters for 2-D SSR FFT should follow the constraints liste below :</p>
<p>1- The radix <code class="docutils literal notranslate"><span class="pre">R</span></code> specified for both the row and column processors in <code class="docutils literal notranslate"><span class="pre">t_ssrFFTParamsRowProc</span></code> and <code class="docutils literal notranslate"><span class="pre">t_ssrFFTParamsColProc</span></code> should be same</p>
<p>2- The possible radix values are  : 2,4,8,16</p>
<p>3- The input data should be a square matrix i.e. <code class="docutils literal notranslate"><span class="pre">t_numRows==t_numCols</span></code></p>
<p>4- t_rowInstanceIDOffset and t_colInstanceIDOffset should be different and <code class="docutils literal notranslate"><span class="pre">abs(t_rowInstanceIDOffset</span> <span class="pre">-</span> <span class="pre">t_colInstanceIDOffset)</span> <span class="pre">&gt;</span> <span class="pre">t_numKernels</span></code></p>
<p>5- The selection of radix <code class="docutils literal notranslate"><span class="pre">R</span></code> , <code class="docutils literal notranslate"><span class="pre">t_numKernels</span></code> and <code class="docutils literal notranslate"><span class="pre">t_memWidth</span></code> should satisfy : <code class="docutils literal notranslate"><span class="pre">R*t_numKernels==t_memWidth</span></code>. This constraint essentially highlights the fact that number of kernels used should be enough not more nor less to exhaust input bandwidth.
6- <code class="docutils literal notranslate"><span class="pre">t_memWidth</span></code> should be multiple of sizeof(complex&lt;float&gt;)</p>
</div>
</div>
<div class="section" id="library-usage">
<h2>Library Usage<a class="headerlink" href="#library-usage" title="Permalink to this headline">¶</a></h2>
<p>This section will provide information about how to use 2-D SSR FFT in your project.</p>
<div class="section" id="fixed-point-2-d-ssr-fft-l1-module-usage">
<h3>Fixed Point 2-D SSR FFT L1 Module Usage<a class="headerlink" href="#fixed-point-2-d-ssr-fft-l1-module-usage" title="Permalink to this headline">¶</a></h3>
<p>To use the fixed point Vitis 2-D SSR FFT L1 module in a C++ HLS design:</p>
<p>1- Clone the Vitis DSP Library git repository and add the following path to compiler include path:</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">REPO_PATH/dsp/L1/include/hw/vitis_2dfft/fixed/</span></code></div></blockquote>
<p>2- Include <code class="docutils literal notranslate"><span class="pre">vt_fft.hpp</span></code></p>
<p>3- Use namespace <code class="docutils literal notranslate"><span class="pre">xf::dsp::fft</span></code></p>
<p>4- Define parameter structures for 1-D SSR FFT processors used along rows and columns lets say call them <code class="docutils literal notranslate"><span class="pre">params_row</span></code> and <code class="docutils literal notranslate"><span class="pre">parms_column</span></code> by extending <code class="docutils literal notranslate"><span class="pre">ssr_fft_default_params</span></code> like <a class="reference internal" href="L1.html#fixed-fft-params-struct-label"><span class="std std-ref">Defining 1-D SSR FFT Parameter Structure</span></a></p>
<p>5- call <code class="docutils literal notranslate"><span class="pre">fft2d&lt;8,</span> <span class="pre">16,</span> <span class="pre">16,</span> <span class="pre">2,</span> <span class="pre">params_row,</span> <span class="pre">params_column,</span> <span class="pre">0,3,</span> <span class="pre">std::complex&lt;ap_fixed&lt;...&gt;&gt;</span> <span class="pre">&gt;(p_inStream,</span> <span class="pre">p_outStream);</span></code> description for template parameters can be found in <a class="reference internal" href="#d-fft-template-params-label"><span class="std std-ref">2-D SSR FFT Template Parameters</span></a></p>
<p>Following section gives usage examples and explains some other interface level details for use in C++ based
HLS design.
To use the 2-D SSR FFT L1 library:</p>
<ol class="arabic simple">
<li>Include the <code class="docutils literal notranslate"><span class="pre">vt_fft.hpp</span></code> header:</li>
</ol>
<pre class="highlight literal-block">
<span></span><span class="cp">#include</span> <span class="cpf">&quot;vt_fft.hpp&quot;</span>
</pre>
<ol class="arabic simple" start="2">
<li>Use namespace <code class="docutils literal notranslate"><span class="pre">xf::dsp::fft</span></code></li>
</ol>
<pre class="highlight literal-block">
<span></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">xf</span><span class="o">::</span><span class="n">dsp</span><span class="o">::</span><span class="n">fft</span><span class="p">;</span>
</pre>
<ol class="arabic simple" start="3">
<li>Define two C++ structure that extends ssr_fft_default_params, one for row and one for column processors:</li>
</ol>
<pre class="highlight literal-block">
<span></span><span class="k">struct</span> <span class="nl">params_row</span><span class="p">:</span><span class="n">ssr_fft_default_params</span>
<span class="p">{</span>
             <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>
             <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">R</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
             <span class="k">static</span> <span class="k">const</span> <span class="n">scaling_mode_enum</span> <span class="n">scaling_mode</span> <span class="o">=</span> <span class="n">SSR_FFT_NO_SCALING</span><span class="p">;</span>
             <span class="k">static</span> <span class="k">const</span> <span class="n">fft_output_order_enum</span> <span class="n">output_data_order</span> <span class="o">=</span> <span class="n">SSR_FFT_NATURAL</span><span class="p">;</span>
             <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">twiddle_table_word_length</span> <span class="o">=</span> <span class="mi">18</span><span class="p">;</span>
             <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">twiddle_table_integer_part_length</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
             <span class="k">static</span> <span class="k">const</span> <span class="n">transform_direction_enum</span> <span class="n">transform_direction</span> <span class="o">=</span> <span class="n">FORWARD_TRANSFORM</span><span class="p">;</span>
             <span class="k">static</span> <span class="k">const</span> <span class="n">butterfly_rnd_mode_enum</span> <span class="n">butterfly_rnd_mode</span> <span class="o">=</span> <span class="n">TRN</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="nl">params_column</span><span class="p">:</span><span class="n">ssr_fft_default_params</span>
<span class="p">{</span>
             <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>
             <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">R</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
             <span class="k">static</span> <span class="k">const</span> <span class="n">scaling_mode_enum</span> <span class="n">scaling_mode</span> <span class="o">=</span> <span class="n">SSR_FFT_NO_SCALING</span><span class="p">;</span>
             <span class="k">static</span> <span class="k">const</span> <span class="n">fft_output_order_enum</span> <span class="n">output_data_order</span> <span class="o">=</span> <span class="n">SSR_FFT_NATURAL</span><span class="p">;</span>
             <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">twiddle_table_word_length</span> <span class="o">=</span> <span class="mi">18</span><span class="p">;</span>
             <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">twiddle_table_integer_part_length</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
             <span class="k">static</span> <span class="k">const</span> <span class="n">transform_direction_enum</span> <span class="n">transform_direction</span> <span class="o">=</span> <span class="n">FORWARD_TRANSFORM</span><span class="p">;</span>
             <span class="k">static</span> <span class="k">const</span> <span class="n">butterfly_rnd_mode_enum</span> <span class="n">butterfly_rnd_mode</span> <span class="o">=</span> <span class="n">TRN</span><span class="p">;</span>
<span class="p">};</span>
</pre>
<ol class="arabic simple" start="4">
<li>Call 2-D FFT L1 module as follows:</li>
</ol>
<pre class="highlight literal-block">
<span></span><span class="n">fft2d</span><span class="o">&lt;</span>
      <span class="mi">8</span><span class="p">,</span>
      <span class="mi">16</span><span class="p">,</span>
      <span class="mi">16</span><span class="p">,</span>
      <span class="mi">2</span><span class="p">,</span>
      <span class="n">params_row</span><span class="p">,</span>
      <span class="n">params_col</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="mi">3</span><span class="p">,</span>
      <span class="n">std</span><span class="o">::</span><span class="n">complex</span><span class="o">&lt;</span><span class="n">ap_fixed</span><span class="o">&lt;</span><span class="p">...</span><span class="o">&gt;&gt;</span>
     <span class="o">&gt;</span><span class="p">(</span><span class="n">p_inStream</span><span class="p">,</span> <span class="n">p_outStream</span><span class="p">);</span>
</pre>
</div>
<div class="section" id="floating-point-2-d-ssr-fft-l1-module-usage">
<h3>Floating Point 2-D SSR FFT L1 Module Usage<a class="headerlink" href="#floating-point-2-d-ssr-fft-l1-module-usage" title="Permalink to this headline">¶</a></h3>
<p>To use the Vitis 2-D SSR FFT L1 module in a C++ HLS design:</p>
<p>1- Clone the Vitis DSP Library git repository and add the following path to compiler include path:</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">REPO_PATH/dsp/L1/include/hw/vitis_2dfft/float/</span></code></div></blockquote>
<p>2- Include <code class="docutils literal notranslate"><span class="pre">vt_fft.hpp</span></code></p>
<p>3- Use namespace <code class="docutils literal notranslate"><span class="pre">xf::dsp::fft</span></code></p>
<p>4- Define parameter structures for 1-D SSR FFT processors used along rows and columns lets say call them <code class="docutils literal notranslate"><span class="pre">params_row</span></code> and <code class="docutils literal notranslate"><span class="pre">parms_column</span></code> by extending <code class="docutils literal notranslate"><span class="pre">ssr_fft_default_params</span></code> like <a class="reference internal" href="L1.html#float-fft-params-struct-label"><span class="std std-ref">Defining 1-D SSR FFT Parameter Structure</span></a></p>
<p>5- call <code class="docutils literal notranslate"><span class="pre">fft2d&lt;8,</span> <span class="pre">16,</span> <span class="pre">16,</span> <span class="pre">2,</span> <span class="pre">params_row,</span> <span class="pre">params_column,</span> <span class="pre">0,3,</span> <span class="pre">complex_wrapper&lt;float&gt;</span> <span class="pre">&gt;(p_inStream,</span> <span class="pre">p_outStream);</span></code> description for template parameters can be found in <a class="reference internal" href="#d-fft-template-params-label"><span class="std std-ref">2-D SSR FFT Template Parameters</span></a></p>
<p>Following section gives usage examples and explains some other interface level details for use in C++ based
HLS design.
To use the 2-D SSR FFT L1 library:</p>
<ol class="arabic simple">
<li>Include the <code class="docutils literal notranslate"><span class="pre">vt_fft.hpp</span></code> header:</li>
</ol>
<pre class="highlight literal-block">
<span></span><span class="cp">#include</span> <span class="cpf">&quot;vt_fft.hpp&quot;</span>
</pre>
<ol class="arabic simple" start="2">
<li>Use namespace <code class="docutils literal notranslate"><span class="pre">xf::dsp::fft</span></code></li>
</ol>
<pre class="highlight literal-block">
<span></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">xf</span><span class="o">::</span><span class="n">dsp</span><span class="o">::</span><span class="n">fft</span><span class="p">;</span>
</pre>
<ol class="arabic simple" start="3">
<li>Define two C++ structure that extends ssr_fft_default_params, one for row and one for column processors:</li>
</ol>
<pre class="highlight literal-block">
<span></span><span class="k">struct</span> <span class="nl">params_row</span><span class="p">:</span><span class="n">ssr_fft_default_params</span>
<span class="p">{</span>
   <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>
   <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">R</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
   <span class="k">static</span> <span class="k">const</span> <span class="n">fft_output_order_enum</span> <span class="n">output_data_order</span> <span class="o">=</span> <span class="n">SSR_FFT_NATURAL</span><span class="p">;</span>
   <span class="k">static</span> <span class="k">const</span> <span class="n">transform_direction_enum</span> <span class="n">transform_direction</span> <span class="o">=</span> <span class="n">FORWARD_TRANSFORM</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="nl">params_column</span><span class="p">:</span><span class="n">ssr_fft_default_params</span>
<span class="p">{</span>
   <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>
   <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">R</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
   <span class="k">static</span> <span class="k">const</span> <span class="n">fft_output_order_enum</span> <span class="n">output_data_order</span> <span class="o">=</span> <span class="n">SSR_FFT_NATURAL</span><span class="p">;</span>
   <span class="k">static</span> <span class="k">const</span> <span class="n">transform_direction_enum</span> <span class="n">transform_direction</span> <span class="o">=</span> <span class="n">FORWARD_TRANSFORM</span><span class="p">;</span>
<span class="p">};</span>
</pre>
<ol class="arabic simple" start="4">
<li>Call 2-D SSR FFT L1 module as follows:</li>
</ol>
<pre class="highlight literal-block">
<span></span><span class="n">fft2d</span><span class="o">&lt;</span>
      <span class="mi">8</span><span class="p">,</span>
      <span class="mi">16</span><span class="p">,</span>
      <span class="mi">16</span><span class="p">,</span>
      <span class="mi">2</span><span class="p">,</span>
      <span class="n">params_row</span><span class="p">,</span>
      <span class="n">params_col</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="mi">3</span><span class="p">,</span>
      <span class="n">complex_wrapper</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span>
     <span class="o">&gt;</span><span class="p">(</span><span class="n">p_inStream</span><span class="p">,</span> <span class="n">p_outStream</span><span class="p">);</span>
</pre>
</div>
</div>
<div class="section" id="d-ssr-fft-examples">
<h2>2-D SSR FFT Examples<a class="headerlink" href="#d-ssr-fft-examples" title="Permalink to this headline">¶</a></h2>
<p>The following section gives examples for 2-D floating and fixed point SSR FFT.</p>
<div class="section" id="d-fixed-point-example">
<h3>2-D Fixed Point Example<a class="headerlink" href="#d-fixed-point-example" title="Permalink to this headline">¶</a></h3>
<p>Following section briefly describes how an example project using Vitis SSR FFT can be build that uses 2-D fixed point SSR FFT.
The source code files are listed which can be used to build HLS project by adding include path that points to
local copy of Vitis FFT library.</p>
<div class="section" id="top-level-definition-and-main-function">
<h4>Top Level Definition and main Function<a class="headerlink" href="#top-level-definition-and-main-function" title="Permalink to this headline">¶</a></h4>
<p>Following section lists a complete example test that uses 2-D fixed point SSR FFT L1 module. The header file named <code class="docutils literal notranslate"><span class="pre">top_2d_fft_test.hpp</span></code> listed
below provides definition of most of the template parameters and data types used in test and also
the declaration of top level function <code class="docutils literal notranslate"><span class="pre">top_fft2d</span></code> that will be synthesized.</p>
<pre class="highlight literal-block">
<span></span><span class="cp">#ifndef _TOP_2D_FFT_TEST_H_</span>
<span class="cp">#define _TOP_2D_FFT_TEST_H_</span>
<span class="cp">#ifndef __SYNTHESIS__</span>
<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#endif</span>
<span class="cp">#include</span> <span class="cpf">&quot;vt_fft.hpp&quot;</span><span class="cp"></span>
<span class="cp">#ifndef __SYNTHESIS__</span>
<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#endif</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">xf</span><span class="o">::</span><span class="n">dsp</span><span class="o">::</span><span class="n">fft</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">ap_fixed</span><span class="o">&lt;</span><span class="mi">27</span><span class="p">,</span> <span class="mi">8</span><span class="o">&gt;</span> <span class="n">T_innerData</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">std</span><span class="o">::</span><span class="n">complex</span><span class="o">&lt;</span><span class="n">T_innerData</span><span class="o">&gt;</span> <span class="n">T_elemType</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">k_memWidthBits</span> <span class="o">=</span> <span class="mi">512</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">k_memWidth</span> <span class="o">=</span> <span class="n">k_memWidthBits</span> <span class="o">/</span> <span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">complex</span><span class="o">&lt;</span><span class="n">T_innerData</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">*</span> <span class="mi">8</span><span class="p">);</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">k_fftKernelRadix</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">k_numOfKernels</span> <span class="o">=</span> <span class="n">k_memWidth</span> <span class="o">/</span> <span class="p">(</span><span class="n">k_fftKernelRadix</span><span class="p">);</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">k_fftKernelSize</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>
<span class="k">typedef</span> <span class="kt">float</span> <span class="n">T_innerFloat</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">std</span><span class="o">::</span><span class="n">complex</span><span class="o">&lt;</span><span class="n">T_innerFloat</span><span class="o">&gt;</span> <span class="n">T_compleFloat</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">k_numRows</span> <span class="o">=</span> <span class="n">k_fftKernelSize</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">k_numCols</span> <span class="o">=</span> <span class="n">k_fftKernelSize</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">k_rowInstanceIDOffset</span> <span class="o">=</span> <span class="mi">40000</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">k_colInstanceIDOffset</span> <span class="o">=</span> <span class="mi">80000</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">k_totalWideSamples</span> <span class="o">=</span> <span class="n">k_fftKernelSize</span> <span class="o">*</span> <span class="n">k_fftKernelSize</span> <span class="o">/</span> <span class="n">k_memWidth</span><span class="p">;</span>
<span class="k">struct</span> <span class="nl">FFTParams</span> <span class="p">:</span> <span class="n">ssr_fft_default_params</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="n">k_fftKernelSize</span><span class="p">;</span>
    <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">R</span> <span class="o">=</span> <span class="n">k_fftKernelRadix</span><span class="p">;</span>
    <span class="k">static</span> <span class="k">const</span> <span class="n">scaling_mode_enum</span> <span class="n">scaling_mode</span> <span class="o">=</span> <span class="n">SSR_FFT_NO_SCALING</span><span class="p">;</span>

    <span class="k">static</span> <span class="k">const</span> <span class="n">transform_direction_enum</span> <span class="n">transform_direction</span> <span class="o">=</span> <span class="n">FORWARD_TRANSFORM</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">struct</span> <span class="nl">FFTParams2</span> <span class="p">:</span> <span class="n">ssr_fft_default_params</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="n">k_fftKernelSize</span><span class="p">;</span>
    <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">R</span> <span class="o">=</span> <span class="n">k_fftKernelRadix</span><span class="p">;</span>
    <span class="k">static</span> <span class="k">const</span> <span class="n">scaling_mode_enum</span> <span class="n">scaling_mode</span> <span class="o">=</span> <span class="n">SSR_FFT_NO_SCALING</span><span class="p">;</span>

    <span class="k">static</span> <span class="k">const</span> <span class="n">transform_direction_enum</span> <span class="n">transform_direction</span> <span class="o">=</span> <span class="n">FORWARD_TRANSFORM</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="n">FFTIOTypes</span><span class="o">&lt;</span><span class="n">FFTParams</span><span class="p">,</span> <span class="n">T_elemType</span><span class="o">&gt;::</span><span class="n">T_outType</span> <span class="n">T_outType_row</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">FFTIOTypes</span><span class="o">&lt;</span><span class="n">FFTParams2</span><span class="p">,</span> <span class="n">T_outType_row</span><span class="o">&gt;::</span><span class="n">T_outType</span> <span class="n">T_outType</span><span class="p">;</span>

<span class="k">typedef</span> <span class="n">WideTypeDefs</span><span class="o">&lt;</span><span class="n">k_memWidth</span><span class="p">,</span> <span class="n">T_elemType</span><span class="o">&gt;::</span><span class="n">WideIFType</span> <span class="n">MemWideIFTypeIn</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">WideTypeDefs</span><span class="o">&lt;</span><span class="n">k_memWidth</span><span class="p">,</span> <span class="n">T_elemType</span><span class="o">&gt;::</span><span class="n">WideIFStreamType</span> <span class="n">MemWideIFStreamTypeIn</span><span class="p">;</span>

<span class="k">typedef</span> <span class="n">WideTypeDefs</span><span class="o">&lt;</span><span class="n">k_memWidth</span><span class="p">,</span> <span class="n">T_outType</span><span class="o">&gt;::</span><span class="n">WideIFType</span> <span class="n">MemWideIFTypeOut</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">WideTypeDefs</span><span class="o">&lt;</span><span class="n">k_memWidth</span><span class="p">,</span> <span class="n">T_outType</span><span class="o">&gt;::</span><span class="n">WideIFStreamType</span> <span class="n">MemWideIFStreamTypeOut</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">top_fft2d</span><span class="p">(</span><span class="n">MemWideIFStreamTypeIn</span><span class="o">&amp;</span> <span class="n">p_inStream</span><span class="p">,</span> <span class="n">MemWideIFStreamTypeOut</span><span class="o">&amp;</span> <span class="n">p_outStream</span><span class="p">);</span>
<span class="cp">#endif</span>
</pre>
<p>Following <code class="docutils literal notranslate"><span class="pre">.cpp</span></code> file named <code class="docutils literal notranslate"><span class="pre">top_2d_fft_test.cpp</span></code> defines top level function which essentially calls <code class="docutils literal notranslate"><span class="pre">fft2d</span></code> from Vitis FFT library.</p>
<pre class="highlight literal-block">
<span></span><span class="cp">#include</span> <span class="cpf">&quot;top_2d_fft_test.hpp&quot;</span><span class="cp"></span>
<span class="kt">void</span> <span class="nf">top_fft2d</span><span class="p">(</span><span class="n">MemWideIFStreamTypeIn</span><span class="o">&amp;</span> <span class="n">p_inStream</span><span class="p">,</span> <span class="n">MemWideIFStreamTypeOut</span><span class="o">&amp;</span> <span class="n">p_outStream</span><span class="p">)</span> <span class="p">{</span>
<span class="cp">#ifdef _DEBUG_TYPES</span>
    <span class="n">T_outType_row</span> <span class="n">T_outType_row_temp</span><span class="p">;</span>
    <span class="n">T_outType</span> <span class="n">T_outType_temp</span><span class="p">;</span>
    <span class="n">MemWideIFTypeIn</span> <span class="n">MemWideIFTypeIn_temp</span><span class="p">;</span>
    <span class="n">MemWideIFTypeOut</span> <span class="n">MemWideIFTypeOut_temp</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="cp">#pragma HLS INLINE</span>
<span class="cp">#pragma HLS DATA_PACK variable = p_inStream</span>
<span class="cp">#pragma HLS DATA_PACK variable = p_outStream</span>
<span class="cp">#pragma HLS interface ap_ctrl_none port = return</span>

<span class="cp">#ifndef __SYNTHESIS__</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;================================================================================&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;-------------------Calling 2D SSR FFT Kernel with Parameters--------------------&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;================================================================================&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    The Main Memory Width (no. complex&lt;ap_fixed&gt;)   : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">k_memWidth</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    The Size of 1D Row Kernel                    : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">FFTParams</span><span class="o">::</span><span class="n">N</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    The SSR for 1D Row Kernel                    : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">FFTParams</span><span class="o">::</span><span class="n">R</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    The Transform Direction for Row Kernel       : &quot;</span>
              <span class="o">&lt;&lt;</span> <span class="p">((</span><span class="n">FFTParams</span><span class="o">::</span><span class="n">transform_direction</span> <span class="o">==</span> <span class="n">FORWARD_TRANSFORM</span><span class="p">)</span> <span class="o">?</span> <span class="s">&quot;Forward&quot;</span> <span class="o">:</span> <span class="s">&quot;Reverse&quot;</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    The Size of 1D Column Kernel                 : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">FFTParams2</span><span class="o">::</span><span class="n">N</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    The SSR for 1D Row Kernel                    : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">FFTParams2</span><span class="o">::</span><span class="n">R</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    The Transform Direction for Row Kernel       : &quot;</span>
              <span class="o">&lt;&lt;</span> <span class="p">((</span><span class="n">FFTParams2</span><span class="o">::</span><span class="n">transform_direction</span> <span class="o">==</span> <span class="n">FORWARD_TRANSFORM</span><span class="p">)</span> <span class="o">?</span> <span class="s">&quot;Forward&quot;</span> <span class="o">:</span> <span class="s">&quot;Reverse&quot;</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    The Row Instance ID Offset                   : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">k_rowInstanceIDOffset</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    The Column Instance ID Offset                : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">k_colInstanceIDOffset</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    Number of 1D Kernels Used Row/Col wise       : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">k_numOfKernels</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    The Total Number of 1D Kernels Used(row+col) : &quot;</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">k_numOfKernels</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;================================================================================&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="cp">#endif</span>
    <span class="n">fft2d</span><span class="o">&lt;</span><span class="n">k_memWidth</span><span class="p">,</span> <span class="n">k_fftKernelSize</span><span class="p">,</span> <span class="n">k_fftKernelSize</span><span class="p">,</span> <span class="n">k_numOfKernels</span><span class="p">,</span> <span class="n">FFTParams</span><span class="p">,</span> <span class="n">FFTParams2</span><span class="p">,</span> <span class="n">k_rowInstanceIDOffset</span><span class="p">,</span>
          <span class="n">k_colInstanceIDOffset</span><span class="p">,</span> <span class="n">T_elemType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">p_inStream</span><span class="p">,</span> <span class="n">p_outStream</span><span class="p">);</span>
<span class="p">}</span>
</pre>
<p>The <code class="docutils literal notranslate"><span class="pre">main</span></code> function is defined as follows which runs an impulse test:</p>
<pre class="highlight literal-block">
<span></span><span class="cp">#define TEST_2D_FFT_</span>
<span class="cp">#ifdef TEST_2D_FFT_</span>
<span class="cp">#ifndef __SYNTHESIS__</span>
<span class="cp">#define _DEBUG_TYPES</span>
<span class="cp">#endif</span>
<span class="cp">#include</span> <span class="cpf">&lt;math.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;assert.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;top_2d_fft_test.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;mVerificationUtlityFunctions.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;vitis_fft/hls_ssr_fft_2d_modeling_utilities.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;vt_fft.hpp&quot;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">**</span> <span class="n">argv</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 2d input matrix</span>
    <span class="n">T_elemType</span> <span class="n">l_inMat</span><span class="p">[</span><span class="n">k_fftKernelSize</span><span class="p">][</span><span class="n">k_fftKernelSize</span><span class="p">];</span>
    <span class="n">T_outType</span> <span class="n">l_outMat</span><span class="p">[</span><span class="n">k_fftKernelSize</span><span class="p">][</span><span class="n">k_fftKernelSize</span><span class="p">];</span>
    <span class="n">T_outType</span> <span class="n">l_data2d_golden</span><span class="p">[</span><span class="n">k_fftKernelSize</span><span class="p">][</span><span class="n">k_fftKernelSize</span><span class="p">];</span>

    <span class="c1">// init input matrix with real part only impulse</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="n">k_fftKernelSize</span><span class="p">;</span> <span class="o">++</span><span class="n">r</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="n">k_fftKernelSize</span><span class="p">;</span> <span class="o">++</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">r</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">c</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">l_inMat</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">T_compleFloat</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
            <span class="k">else</span>
                <span class="n">l_inMat</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">T_compleFloat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">// Wide Stream for reading and streaming a 2-d matrix</span>
    <span class="n">MemWideIFStreamTypeIn</span> <span class="n">l_matToStream</span><span class="p">(</span><span class="s">&quot;matrixToStreaming&quot;</span><span class="p">);</span>
    <span class="n">MemWideIFStreamTypeOut</span> <span class="n">fftOutputStream</span><span class="p">(</span><span class="s">&quot;fftOutputStream&quot;</span><span class="p">);</span>
    <span class="c1">// Pass same data stream multiple times to measure the II correctly</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">runs</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">runs</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="o">++</span><span class="n">runs</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">stream2DMatrix</span><span class="o">&lt;</span><span class="n">k_fftKernelSize</span><span class="p">,</span> <span class="n">k_fftKernelSize</span><span class="p">,</span> <span class="n">k_memWidth</span><span class="p">,</span> <span class="n">T_elemType</span><span class="p">,</span> <span class="n">MemWideIFTypeIn</span><span class="o">&gt;</span><span class="p">(</span><span class="n">l_inMat</span><span class="p">,</span>
                                                                                                  <span class="n">l_matToStream</span><span class="p">);</span>
        <span class="n">top_fft2d</span><span class="p">(</span><span class="n">l_matToStream</span><span class="p">,</span> <span class="n">fftOutputStream</span><span class="p">);</span>

        <span class="n">printMatStream</span><span class="o">&lt;</span><span class="n">k_fftKernelSize</span><span class="p">,</span> <span class="n">k_fftKernelSize</span><span class="p">,</span> <span class="n">k_memWidth</span><span class="p">,</span> <span class="n">MemWideIFTypeOut</span><span class="o">&gt;</span><span class="p">(</span>
            <span class="n">fftOutputStream</span><span class="p">,</span> <span class="s">&quot;2D SSR FFT Output Natural Order...&quot;</span><span class="p">);</span>
        <span class="n">streamToMatrix</span><span class="o">&lt;</span><span class="n">k_fftKernelSize</span><span class="p">,</span> <span class="n">k_fftKernelSize</span><span class="p">,</span> <span class="n">k_memWidth</span><span class="p">,</span> <span class="n">T_outType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">fftOutputStream</span><span class="p">,</span> <span class="n">l_outMat</span><span class="p">);</span>
    <span class="p">}</span> <span class="c1">// runs loop</span>

    <span class="n">T_outType</span> <span class="n">golden_result</span> <span class="o">=</span> <span class="n">T_elemType</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="n">k_fftKernelSize</span><span class="p">;</span> <span class="o">++</span><span class="n">r</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="n">k_fftKernelSize</span><span class="p">;</span> <span class="o">++</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">golden_result</span> <span class="o">!=</span> <span class="n">l_outMat</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">])</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;================================================================&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;---------------------Impulse test Passed Successfully.&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;================================================================&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#endif</span>
</pre>
</div>
<div class="section" id="compiling-and-building-example-hls-project">
<h4>Compiling and Building Example HLS Project<a class="headerlink" href="#compiling-and-building-example-hls-project" title="Permalink to this headline">¶</a></h4>
<p>Before compiling and running the example it is required to setup the path to HLS compiler which can be done as follows:
change the setting of environment variable <strong>TA_PATH</strong> to point to the installation path of your Vitis 2021.1, and run following command to set up the environment.</p>
<pre class="highlight literal-block">
<span></span><span class="nb">export</span> <span class="nv">XILINX_VITIS</span><span class="o">=</span><span class="si">${</span><span class="nv">TA_PATH</span><span class="si">}</span>/Vitis/2021.1
<span class="nb">export</span> <span class="nv">XILINX_VIVADO</span><span class="o">=</span><span class="si">${</span><span class="nv">TA_PATH</span><span class="si">}</span>/Vivado/2021.1
<span class="nb">source</span> <span class="si">${</span><span class="nv">XILINX_VIVADO</span><span class="si">}</span>/settings64.sh
</pre>
<p>The example discussed above is also provided as an example test and available at the following path : <code class="docutils literal notranslate"><span class="pre">REPO_PATH/dsp/L1/examples/2Dfix_impluse</span></code> it can be simulated, synthesized or co-simulated as follows:
Simply go to the directory <code class="docutils literal notranslate"><span class="pre">REPO_PATH/dsp/L1/examples/2Dfix_impluse</span></code> and simulat,build and co-simulate project using : <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">run</span> <span class="pre">XPART='xcu200-fsgd2104-2-e'</span> <span class="pre">CSIM=1</span> <span class="pre">CSYNTH=1</span> <span class="pre">COSIM=1</span></code> you can choose the part number as required and by settting CSIM/CSYNTH/COSIM=0 choose what to build and run with make target</p>
</div>
</div>
<div class="section" id="d-floating-point-example">
<h3>2-D Floating Point Example<a class="headerlink" href="#d-floating-point-example" title="Permalink to this headline">¶</a></h3>
<p>Following section briefly describes how an example project using Vitis SSR FFT can be build that uses 2-D SSR FFT.
The source code files are listed which can be used to build HLS project by adding include path that points to
local copy of Vitis FFT library.</p>
<div class="section" id="id1">
<h4>Top Level Definition and main Function<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>Following section lists a complete example test that uses 2-D SSR FFT L1 module. The header file named <code class="docutils literal notranslate"><span class="pre">top_2d_fft_test.hpp</span></code> listed
below provides definition of most of the template parameters and data types used in test and also
the declaration of top level function <code class="docutils literal notranslate"><span class="pre">top_fft2d</span></code> that will be synthesized.</p>
<pre class="highlight literal-block">
<span></span> <span class="cp">#ifndef _TOP_2D_FFT_TEST_H_</span>
<span class="cp">#define _TOP_2D_FFT_TEST_H_</span>
<span class="cp">#ifndef __SYNTHESIS__</span>
<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#endif</span>

<span class="cp">#include</span> <span class="cpf">&quot;vt_fft.hpp&quot;</span><span class="cp"></span>
<span class="cp">#ifndef __SYNTHESIS__</span>
<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#endif</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">xf</span><span class="o">::</span><span class="n">dsp</span><span class="o">::</span><span class="n">fft</span><span class="p">;</span>
<span class="k">typedef</span> <span class="kt">float</span> <span class="n">T_innerData</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">complex_wrapper</span><span class="o">&lt;</span><span class="n">T_innerData</span><span class="o">&gt;</span> <span class="n">T_elemType</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">k_memWidthBits</span> <span class="o">=</span> <span class="mi">512</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">k_memWidth</span> <span class="o">=</span> <span class="n">k_memWidthBits</span> <span class="o">/</span> <span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">complex_wrapper</span><span class="o">&lt;</span><span class="n">T_innerData</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">*</span> <span class="mi">8</span><span class="p">);</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">k_fftKernelRadix</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">k_numOfKernels</span> <span class="o">=</span> <span class="n">k_memWidth</span> <span class="o">/</span> <span class="p">(</span><span class="n">k_fftKernelRadix</span><span class="p">);</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">k_fftKernelSize</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>
<span class="k">typedef</span> <span class="kt">float</span> <span class="n">T_innerFloat</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">complex_wrapper</span><span class="o">&lt;</span><span class="n">T_innerFloat</span><span class="o">&gt;</span> <span class="n">T_compleFloat</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">k_numRows</span> <span class="o">=</span> <span class="n">k_fftKernelSize</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">k_numCols</span> <span class="o">=</span> <span class="n">k_fftKernelSize</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">k_rowInstanceIDOffset</span> <span class="o">=</span> <span class="mi">40000</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">k_colInstanceIDOffset</span> <span class="o">=</span> <span class="mi">80000</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">k_totalWideSamples</span> <span class="o">=</span> <span class="n">k_fftKernelSize</span> <span class="o">*</span> <span class="n">k_fftKernelSize</span> <span class="o">/</span> <span class="n">k_memWidth</span><span class="p">;</span>
<span class="k">struct</span> <span class="nl">FFTParams</span> <span class="p">:</span> <span class="n">ssr_fft_default_params</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="n">k_fftKernelSize</span><span class="p">;</span>
    <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">R</span> <span class="o">=</span> <span class="n">k_fftKernelRadix</span><span class="p">;</span>

    <span class="k">static</span> <span class="k">const</span> <span class="n">transform_direction_enum</span> <span class="n">transform_direction</span> <span class="o">=</span> <span class="n">FORWARD_TRANSFORM</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">struct</span> <span class="nl">FFTParams2</span> <span class="p">:</span> <span class="n">ssr_fft_default_params</span> <span class="p">{</span>
    <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="n">k_fftKernelSize</span><span class="p">;</span>
    <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">R</span> <span class="o">=</span> <span class="n">k_fftKernelRadix</span><span class="p">;</span>

    <span class="k">static</span> <span class="k">const</span> <span class="n">transform_direction_enum</span> <span class="n">transform_direction</span> <span class="o">=</span> <span class="n">FORWARD_TRANSFORM</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="n">FFTIOTypes</span><span class="o">&lt;</span><span class="n">FFTParams</span><span class="p">,</span> <span class="n">T_elemType</span><span class="o">&gt;::</span><span class="n">T_outType</span> <span class="n">T_outType_row</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">FFTIOTypes</span><span class="o">&lt;</span><span class="n">FFTParams2</span><span class="p">,</span> <span class="n">T_outType_row</span><span class="o">&gt;::</span><span class="n">T_outType</span> <span class="n">T_outType</span><span class="p">;</span>

<span class="k">typedef</span> <span class="n">WideTypeDefs</span><span class="o">&lt;</span><span class="n">k_memWidth</span><span class="p">,</span> <span class="n">T_elemType</span><span class="o">&gt;::</span><span class="n">WideIFType</span> <span class="n">MemWideIFTypeIn</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">WideTypeDefs</span><span class="o">&lt;</span><span class="n">k_memWidth</span><span class="p">,</span> <span class="n">T_elemType</span><span class="o">&gt;::</span><span class="n">WideIFStreamType</span> <span class="n">MemWideIFStreamTypeIn</span><span class="p">;</span>

<span class="k">typedef</span> <span class="n">WideTypeDefs</span><span class="o">&lt;</span><span class="n">k_memWidth</span><span class="p">,</span> <span class="n">T_outType</span><span class="o">&gt;::</span><span class="n">WideIFType</span> <span class="n">MemWideIFTypeOut</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">WideTypeDefs</span><span class="o">&lt;</span><span class="n">k_memWidth</span><span class="p">,</span> <span class="n">T_outType</span><span class="o">&gt;::</span><span class="n">WideIFStreamType</span> <span class="n">MemWideIFStreamTypeOut</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">top_fft2d</span><span class="p">(</span><span class="n">MemWideIFStreamTypeIn</span><span class="o">&amp;</span> <span class="n">p_inStream</span><span class="p">,</span> <span class="n">MemWideIFStreamTypeOut</span><span class="o">&amp;</span> <span class="n">p_outStream</span><span class="p">);</span>
<span class="cp">#endif</span>
</pre>
<p>Following <code class="docutils literal notranslate"><span class="pre">.cpp</span></code> file named <code class="docutils literal notranslate"><span class="pre">top_2d_fft_test.cpp</span></code> defines top level function which essentially calls <code class="docutils literal notranslate"><span class="pre">fft2d</span></code> from Vitis FFT library.</p>
<pre class="highlight literal-block">
<span></span><span class="cp">#include</span> <span class="cpf">&quot;top_2d_fft_test.hpp&quot;</span><span class="cp"></span>
<span class="kt">void</span> <span class="nf">top_fft2d</span><span class="p">(</span><span class="n">MemWideIFStreamTypeIn</span><span class="o">&amp;</span> <span class="n">p_inStream</span><span class="p">,</span> <span class="n">MemWideIFStreamTypeOut</span><span class="o">&amp;</span> <span class="n">p_outStream</span><span class="p">)</span> <span class="p">{</span>
<span class="cp">#ifdef _DEBUG_TYPES</span>
    <span class="n">T_outType_row</span> <span class="n">T_outType_row_temp</span><span class="p">;</span>
    <span class="n">T_outType</span> <span class="n">T_outType_temp</span><span class="p">;</span>
    <span class="n">MemWideIFTypeIn</span> <span class="n">MemWideIFTypeIn_temp</span><span class="p">;</span>
    <span class="n">MemWideIFTypeOut</span> <span class="n">MemWideIFTypeOut_temp</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="cp">#pragma HLS INLINE</span>
<span class="cp">#pragma HLS DATA_PACK variable = p_inStream</span>
<span class="cp">#pragma HLS DATA_PACK variable = p_outStream</span>
<span class="cp">#pragma HLS interface ap_ctrl_none port = return</span>

<span class="cp">#ifndef __SYNTHESIS__</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;================================================================================&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;-------------------Calling 2D SSR FFT Kernel with Parameters--------------------&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;================================================================================&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    The Main Memory Width (no. complex&lt;float&gt;)   : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">k_memWidth</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    The Size of 1D Row Kernel                    : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">FFTParams</span><span class="o">::</span><span class="n">N</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    The SSR for 1D Row Kernel                    : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">FFTParams</span><span class="o">::</span><span class="n">R</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    The Transform Direction for Row Kernel       : &quot;</span>
              <span class="o">&lt;&lt;</span> <span class="p">((</span><span class="n">FFTParams</span><span class="o">::</span><span class="n">transform_direction</span> <span class="o">==</span> <span class="n">FORWARD_TRANSFORM</span><span class="p">)</span> <span class="o">?</span> <span class="s">&quot;Forward&quot;</span> <span class="o">:</span> <span class="s">&quot;Reverse&quot;</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    The Size of 1D Column Kernel                 : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">FFTParams2</span><span class="o">::</span><span class="n">N</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    The SSR for 1D Row Kernel                    : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">FFTParams2</span><span class="o">::</span><span class="n">R</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    The Transform Direction for Row Kernel       : &quot;</span>
              <span class="o">&lt;&lt;</span> <span class="p">((</span><span class="n">FFTParams2</span><span class="o">::</span><span class="n">transform_direction</span> <span class="o">==</span> <span class="n">FORWARD_TRANSFORM</span><span class="p">)</span> <span class="o">?</span> <span class="s">&quot;Forward&quot;</span> <span class="o">:</span> <span class="s">&quot;Reverse&quot;</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    The Row Instance ID Offset                   : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">k_rowInstanceIDOffset</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    The Column Instance ID Offset                : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">k_colInstanceIDOffset</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    Number of 1D Kernels Used Row/Col wise       : &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">k_numOfKernels</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;    The Total Number of 1D Kernels Used(row+col) : &quot;</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">k_numOfKernels</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;================================================================================&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="cp">#endif</span>
    <span class="n">fft2d</span><span class="o">&lt;</span><span class="n">k_memWidth</span><span class="p">,</span> <span class="n">k_fftKernelSize</span><span class="p">,</span> <span class="n">k_fftKernelSize</span><span class="p">,</span> <span class="n">k_numOfKernels</span><span class="p">,</span> <span class="n">FFTParams</span><span class="p">,</span> <span class="n">FFTParams2</span><span class="p">,</span> <span class="n">k_rowInstanceIDOffset</span><span class="p">,</span>
          <span class="n">k_colInstanceIDOffset</span><span class="p">,</span> <span class="n">T_elemType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">p_inStream</span><span class="p">,</span> <span class="n">p_outStream</span><span class="p">);</span>
<span class="p">}</span>
</pre>
<p>The <code class="docutils literal notranslate"><span class="pre">main</span></code> function is defined as follows which runs an impulse test:</p>
<pre class="highlight literal-block">
<span></span><span class="cp">#define TEST_2D_FFT_</span>
<span class="cp">#ifdef TEST_2D_FFT_</span>
<span class="cp">#ifndef __SYNTHESIS__</span>
<span class="cp">#define _DEBUG_TYPES</span>
<span class="cp">#endif</span>
<span class="cp">#include</span> <span class="cpf">&lt;math.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;assert.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;top_2d_fft_test.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;mVerificationUtlityFunctions.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;vitis_fft/hls_ssr_fft_2d_modeling_utilities.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;vt_fft.hpp&quot;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">**</span> <span class="n">argv</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 2d input matrix</span>
    <span class="n">T_elemType</span> <span class="n">l_inMat</span><span class="p">[</span><span class="n">k_fftKernelSize</span><span class="p">][</span><span class="n">k_fftKernelSize</span><span class="p">];</span>
    <span class="n">T_outType</span> <span class="n">l_outMat</span><span class="p">[</span><span class="n">k_fftKernelSize</span><span class="p">][</span><span class="n">k_fftKernelSize</span><span class="p">];</span>
    <span class="n">T_outType</span> <span class="n">l_data2d_golden</span><span class="p">[</span><span class="n">k_fftKernelSize</span><span class="p">][</span><span class="n">k_fftKernelSize</span><span class="p">];</span>

    <span class="c1">// init input matrix with real part only impulse</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="n">k_fftKernelSize</span><span class="p">;</span> <span class="o">++</span><span class="n">r</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="n">k_fftKernelSize</span><span class="p">;</span> <span class="o">++</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">r</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">c</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">l_inMat</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">T_compleFloat</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
            <span class="k">else</span>
                <span class="n">l_inMat</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">T_compleFloat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">// Wide Stream for reading and streaming a 2-d matrix</span>
    <span class="n">MemWideIFStreamTypeIn</span> <span class="n">l_matToStream</span><span class="p">(</span><span class="s">&quot;matrixToStreaming&quot;</span><span class="p">);</span>
    <span class="n">MemWideIFStreamTypeOut</span> <span class="n">fftOutputStream</span><span class="p">(</span><span class="s">&quot;fftOutputStream&quot;</span><span class="p">);</span>
    <span class="c1">// Pass same data stream multiple times to measure the II correctly</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">runs</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">runs</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="o">++</span><span class="n">runs</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">stream2DMatrix</span><span class="o">&lt;</span><span class="n">k_fftKernelSize</span><span class="p">,</span> <span class="n">k_fftKernelSize</span><span class="p">,</span> <span class="n">k_memWidth</span><span class="p">,</span> <span class="n">T_elemType</span><span class="p">,</span> <span class="n">MemWideIFTypeIn</span><span class="o">&gt;</span><span class="p">(</span><span class="n">l_inMat</span><span class="p">,</span>
                                                                                                  <span class="n">l_matToStream</span><span class="p">);</span>
        <span class="n">top_fft2d</span><span class="p">(</span><span class="n">l_matToStream</span><span class="p">,</span> <span class="n">fftOutputStream</span><span class="p">);</span>

        <span class="n">printMatStream</span><span class="o">&lt;</span><span class="n">k_fftKernelSize</span><span class="p">,</span> <span class="n">k_fftKernelSize</span><span class="p">,</span> <span class="n">k_memWidth</span><span class="p">,</span> <span class="n">MemWideIFTypeOut</span><span class="o">&gt;</span><span class="p">(</span>
            <span class="n">fftOutputStream</span><span class="p">,</span> <span class="s">&quot;2D SSR FFT Output Natural Order...&quot;</span><span class="p">);</span>
        <span class="n">streamToMatrix</span><span class="o">&lt;</span><span class="n">k_fftKernelSize</span><span class="p">,</span> <span class="n">k_fftKernelSize</span><span class="p">,</span> <span class="n">k_memWidth</span><span class="p">,</span> <span class="n">T_outType</span><span class="o">&gt;</span><span class="p">(</span><span class="n">fftOutputStream</span><span class="p">,</span> <span class="n">l_outMat</span><span class="p">);</span>
    <span class="p">}</span> <span class="c1">// runs loop</span>

    <span class="n">T_outType</span> <span class="n">golden_result</span> <span class="o">=</span> <span class="n">T_elemType</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="n">k_fftKernelSize</span><span class="p">;</span> <span class="o">++</span><span class="n">r</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="n">k_fftKernelSize</span><span class="p">;</span> <span class="o">++</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">golden_result</span> <span class="o">!=</span> <span class="n">l_outMat</span><span class="p">[</span><span class="n">r</span><span class="p">][</span><span class="n">c</span><span class="p">])</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;================================================================&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;---------------------Impulse test Passed Successfully.&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;================================================================&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#endif</span>
</pre>
</div>
<div class="section" id="id2">
<h4>Compiling and Building Example HLS Project<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>Before compiling and running the example it is required to setup the path to HLS compiler which can be done as follows:
change the setting of environment variable <strong>TA_PATH</strong> to point to the installation path of your Vitis 2021.1, and run following command to set up the environment.</p>
<pre class="highlight literal-block">
<span></span><span class="nb">export</span> <span class="nv">XILINX_VITIS</span><span class="o">=</span><span class="si">${</span><span class="nv">TA_PATH</span><span class="si">}</span>/Vitis/2021.1
<span class="nb">export</span> <span class="nv">XILINX_VIVADO</span><span class="o">=</span><span class="si">${</span><span class="nv">TA_PATH</span><span class="si">}</span>/Vivado/2021.1
<span class="nb">source</span> <span class="si">${</span><span class="nv">XILINX_VIVADO</span><span class="si">}</span>/settings64.sh
</pre>
<p>The example discussed above is also provided as an example test and available at the following path : <code class="docutils literal notranslate"><span class="pre">REPO_PATH/dsp/L1/examples/2Dfloat_impluse</span></code> it can be simulated, synthesized or co-simulated as follows:
Simply go to the directory <code class="docutils literal notranslate"><span class="pre">REPO_PATH/dsp/L1/examples/2Dfloat_impluse</span></code> and simulat, build and co-simulate project using : <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">run</span> <span class="pre">XPART='xcu200-fsgd2104-2-e'</span> <span class="pre">CSIM=1</span> <span class="pre">CSYNTH=1</span> <span class="pre">COSIM=1</span></code> you can choose the part number as required and by settting CSIM/CSYNTH/COSIM=0 choose what to build and run with make target.</p>
</div>
</div>
<div class="section" id="d-ssr-fft-tests">
<h3>2-D SSR FFT Tests<a class="headerlink" href="#d-ssr-fft-tests" title="Permalink to this headline">¶</a></h3>
<p>Different tests are provided for fixed point and floating point 2-D SSR FFT. These test can be ran indivisually using the makefile or they can all be lauched at the same time by using a provided script. All the 2-D SSR FFT tests are in folder <code class="docutils literal notranslate"><span class="pre">REPO_PATH/dsp/L1/tests/hw/2dfft</span></code></p>
<div class="section" id="launching-an-individual-test">
<h4>Launching an Individual Test<a class="headerlink" href="#launching-an-individual-test" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>To launch an individual test first it is required to setup environment for lanching Vitis HLS Compiler which can be done as follows:</dt>
<dd>setup of environment variable <strong>TA_PATH</strong> to point to the installation path of your Vitis 2021.1, and run following commands to set up the environment.</dd>
</dl>
<pre class="highlight literal-block">
<span></span><span class="nb">export</span> <span class="nv">XILINX_VITIS</span><span class="o">=</span><span class="si">${</span><span class="nv">TA_PATH</span><span class="si">}</span>/Vitis/2021.1
<span class="nb">export</span> <span class="nv">XILINX_VIVADO</span><span class="o">=</span><span class="si">${</span><span class="nv">TA_PATH</span><span class="si">}</span>/Vivado/2021.1
<span class="nb">source</span> <span class="si">${</span><span class="nv">XILINX_VIVADO</span><span class="si">}</span>/settings64.sh
</pre>
<p>Once the environment settings are done an idividual test can be launched by going to test folder ( any folder inside sub-directory at any level of <code class="docutils literal notranslate"><span class="pre">REPO_PATH/dsp/L1/test/hw/</span></code> that has Makefile is a test) and running the make command :
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">run</span> <span class="pre">XPART='xcu200-fsgd2104-2-e'</span> <span class="pre">CSIM=1</span> <span class="pre">CSYNTH=1</span> <span class="pre">COSIM=1</span></code>  you can choose the part number as required and by settting CSIM/CSYNTH/COSIM=0 choose what to build and run with make target</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="L2/1-introduction.html" class="btn btn-neutral float-right" title="Introduction" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="L1.html" class="btn btn-neutral float-left" title="1-Dimensional(Line) SSR FFT L1 FPGA Module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2019-2021, Xilinx Inc.
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>