


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta content="graph, running flow, asynchronous" name="keywords" />
<meta content="A series of classes are provided that represent the various graph models that are supported. These classes provide all the methods that are required to run that graph model on a given HW device." name="description" />
<meta content="Document" name="xlnxdocumentclass" />
<meta content="Tutorials" name="xlnxdocumenttype" />

		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="../../_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

  
  
  
  

  
      <script type="text/javascript" src="../../_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="../../_static/js/gtm.js"></script>
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="../../_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="../../_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="../../_static/js/header-footer.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="../../_static/js/linkid.js"></script>
    <script type="text/javascript" src="../../_static/js/Searchbox.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="API Document" href="../api.html" />
    <link rel="prev" title="Getting Started" href="getting_started.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="header parbase aem-GridColumn aem-GridColumn--default--12">
								<noindex>
									<header data-component="header">
										<nav class="navbar navbar-default aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid main-nav">
													<div class="row">
														<div class="col-xs-12">
															<div class="logo-column">
																<div class="logo">
																	<a href="https://www.xilinx.com/">
																	<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
																	</a>
																</div>
															</div>
															<div class="navbar-column">
																<div class="navbar navbar-collapse collapse" id="xilinx-main-menu">
																	<div class="mobile-search-container">
																		<div id="headerSearchBox" class="headerSearch"
																			data-component="header-search"
																			data-redirect-if-empty="false"
																			data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																			data-coveo-organization-id="xilinxcomprode2rjoqok">
																			<div class='coveo-search-section'>
																				<div class="CoveoAnalytics" data-search-hub="Site"></div>
																				<ul class="dropdown-menu options">
																					<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																						<a href="#">
																						All</a>
																					</li>
																					<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com//products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Silicon Devices</a>
																					</li>
																					<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com//products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Boards and Kits</a>
																					</li>
																					<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com//products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																						<a href="#">
																						Intellectual Property</a>
																					</li>
																					<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																						<a href="#">
																						Support</a>
																						<ul>
																							<li data-label="Documentation" data-action-link="https://www.xilinx.com//support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																								<a href="#">
																								Documentation</a>
																							</li>
																							<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com//support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																								<a href="#">
																								Knowledge Base</a>
																							</li>
																							<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																								<a href="#">
																								Community Forums</a>
																							</li>
																						</ul>
																					</li>
																					<li data-label="Partners" data-action-link="https://www.xilinx.com//alliance/member-keyword-search.html" data-search-hub="Partner">
																						<a href="#">
																						Partners</a>
																					</li>
																					<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																						<a href="#">
																						Videos</a>
																					</li>
																					<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																						<a href="#">
																						Press</a>
																					</li>
																				</ul>
																				<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																				<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																			</div>
																		</div>
																	</div>
																	<ul class="nav navbar-nav nav-justified">
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/applications.html">
																			Applications</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/products/silicon-devices.html">
																			Products</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://developer.xilinx.com/">
																			Developers</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/support.html">
																			Support</a>
																		</li>
																		<li class="accordion-toggle-icons" data-component="toggle-dropdown">
																			<a href="https://www.xilinx.com/about/company-overview.html">
																			About</a>
																		</li>
																	</ul>
																</div>
															</div>
															<script type="text/javascript" src="../../_static/js/gtm.js"></script>
															<!--<div class="mini-nav">
																<button type="button" data-function="xilinx-mobile-menu" id="nav-toggle" class="navbar-toggle collapsed visible-xs-block" aria-expanded="false">
																<span></span>
																<span></span>
																<span></span>
																<span></span>
																</button>
																<ul class="list-inline">
																	<li class="dropdown user-menu">
																		<button data-toggle="dropdown">
																		<span class="sr-only">Account</span>
																		<span class="fas fa-user"></span>
																		</button>
																		<ul class="dropdown-menu">
																			<li>
																				<a href="https://www.xilinx.com/myprofile/subscriptions.html">
																				My Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/registration/create-account.html">
																				Create Account</a>
																			</li>
																			<li>
																				<a href="https://www.xilinx.com/bin/protected/en/signout">
																				Sign Out</a>
																			</li>
																		</ul>
																	</li>
																	<li class="hidden-xs">
																		<button data-function="search-toggle">
																		<span class="sr-only">Search</span>
																		<span class="far fa-search"></span>
																		</button>
																	</li>
																</ul>
															</div>
															-->
															<div class="search-container">
																<div id="headerSearchBox" class="headerSearch"
																	data-component="header-search"
																	data-redirect-if-empty="false"
																	data-coveo-access-token="xxa237d4dd-f0aa-47fc-9baa-af9121851b33"
																	data-coveo-organization-id="xilinxcomprode2rjoqok">
																	<div class='coveo-search-section'>
																		<div class="CoveoAnalytics" data-search-hub="Site"></div>
																		<ul class="dropdown-menu options">
																			<li class="option" data-label="All" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-search-hub="Site">
																				<a href="#">
																				All</a>
																			</li>
																			<li data-label="Silicon Devices" data-action-link="https://www.xilinx.com/products/silicon-devices/si-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Silicon Devices</a>
																			</li>
																			<li data-label="Boards and Kits" data-action-link="https://www.xilinx.com/products/boards-and-kits/bk-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Boards and Kits</a>
																			</li>
																			<li data-label="Intellectual Property" data-action-link="https://www.xilinx.com/products/intellectual-property/ip-keyword-search.html" data-search-hub="Product">
																				<a href="#">
																				Intellectual Property</a>
																			</li>
																			<li data-label="Support" class="option" data-action-link="https://www.xilinx.com/search/support-keyword-search.html" data-search-hub="Support">
																				<a href="#">
																				Support</a>
																				<ul>
																					<li data-label="Documentation" data-action-link="https://www.xilinx.com/support/documentation-navigation/documentation-keyword-search.html" data-search-hub="Document">
																						<a href="#">
																						Documentation</a>
																					</li>
																					<li data-label="Knowledge Base" data-action-link="https://www.xilinx.com/support/answer-navigation/answer-keyword-search.html" data-search-hub="AnswerRecord">
																						<a href="#">
																						Knowledge Base</a>
																					</li>
																					<li data-label="Community Forums" data-action-link="https://www.xilinx.com/search/forums-keyword-search.html" data-search-hub="Forums">
																						<a href="#">
																						Community Forums</a>
																					</li>
																				</ul>
																			</li>
																			<li data-label="Partners" data-action-link="https://www.xilinx.com/alliance/member-keyword-search.html" data-search-hub="Partner">
																				<a href="#">
																				Partners</a>
																			</li>
																			<li data-label="Videos" data-action-link="https://www.xilinx.com/video/video-keyword-search.html" data-search-hub="Video">
																				<a href="#">
																				Videos</a>
																			</li>
																			<li data-label="Press" data-action-link="https://www.xilinx.com/search/press-keyword-search.html" data-search-hub="Press">
																				<a href="#">
																				Press</a>
																			</li>
																		</ul>
																		<a href="#" class="btn dropdown-toggle value" data-toggle="dropdown"></a>
																		<div class="CoveoSearchbox" data-id="coveosearchbox" data-action-link="https://www.xilinx.com/search/site-keyword-search.html" data-placeholder="Search Xilinx"></div>
																	</div>
																</div>
																<button data-function="search-toggle">
																<span class="sr-only">Search</span>
																<span class="far fa-times"></span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</nav>
									</header>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Vitis Graph Library
          

          
          </a>

          
            
            
              <div class="version">
                2021.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">Library Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html#license">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html#trademark-notice">Trademark Notice</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release.html">Release Note</a></li>
</ul>
<p class="caption"><span class="caption-text">L1 User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../guide_L1/api.html">API Document</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../guide_L1/internals.html">Design Internals</a></li>
</ul>
<p class="caption"><span class="caption-text">L2 User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../guide_L2/api.html">API Document</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../guide_L2/internals.html">Design Internals</a></li>
</ul>
<p class="caption"><span class="caption-text">L3 User Guide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../utilization_L3.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Running Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic-flow">Basic Flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#asynchronous-execution">Asynchronous Execution</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-of-using-multiple-requests">Example of using multiple requests</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API Document</a></li>
</ul>
<p class="caption"><span class="caption-text">Plugin User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../plugin/tigergraph_integration.html">TigerGraph Integration</a></li>
</ul>
<p class="caption"><span class="caption-text">Benchmark</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../benchmark.html">Benchmark</a></li>
</ul>

            
			
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Vitis Graph Library</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../utilization_L3.html">User Guide</a> &raquo;</li>
        
      <li>Running Examples</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="running-examples">
<h1>Running Examples<a class="headerlink" href="#running-examples" title="Permalink to this headline">¶</a></h1>
<p>A series of classes are provided that represent the various graph models that are supported.
These classes provide all the methods that are required to run that graph model on a given HW device.</p>
<div class="section" id="basic-flow">
<h2>Basic Flow<a class="headerlink" href="#basic-flow" title="Permalink to this headline">¶</a></h2>
<p>The hardware deployments and API executions have been seperated. All the harware deployment related information should be defined in the struct of xf::graph::L3::Handle::singleOP.
To run an example there are 8 basic steps:</p>
<ul class="simple">
<li>Instantiate an instance of struct xf::graph::L3::Handle::singleOP</li>
<li>Instantiate an instance of class xf::graph::L3::Handle</li>
<li>Deploy hardwares by using the instance of struct singleOP</li>
<li>Instantiate an instance of class xf::graph::L3::Graph and load data</li>
<li>Load Graph instance to hardwares</li>
<li>Run the model (as many times as required)</li>
<li>Release the Handle instance in order to recycle harware resources</li>
<li>Release the Graph instance and buffers in order to avoid memory leaks</li>
</ul>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<pre class="highlight literal-block">
<span></span><span class="cp">#include</span> <span class="cpf">&quot;xf_graph_L3.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;cstring&gt;</span><span class="cp"></span>

<span class="cp">#define DT float</span>

<span class="c1">//----------------- Setup shortestPathFloat thread -------------</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">opName</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">kernelName</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">requestLoad</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">xclbinPath</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">deviceNeeded</span><span class="p">;</span>

<span class="n">xf</span><span class="o">::</span><span class="n">graph</span><span class="o">::</span><span class="n">L3</span><span class="o">::</span><span class="n">Handle</span><span class="o">::</span><span class="n">singleOP</span> <span class="n">op0</span><span class="p">;</span>
<span class="n">op0</span><span class="p">.</span><span class="n">operationName</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">opName</span><span class="p">.</span><span class="n">c_str</span><span class="p">();</span>
<span class="n">op0</span><span class="p">.</span><span class="n">setKernelName</span><span class="p">((</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">kernelName</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
<span class="n">op0</span><span class="p">.</span><span class="n">requestLoad</span> <span class="o">=</span> <span class="n">requestLoad</span><span class="p">;</span>
<span class="n">op0</span><span class="p">.</span><span class="n">xclbinFile</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">xclbinPath</span><span class="p">.</span><span class="n">c_str</span><span class="p">();</span>
<span class="n">op0</span><span class="p">.</span><span class="n">deviceNeeded</span> <span class="o">=</span> <span class="n">deviceNeeded</span><span class="p">;</span>

<span class="n">xf</span><span class="o">::</span><span class="n">graph</span><span class="o">::</span><span class="n">L3</span><span class="o">::</span><span class="n">Handle</span> <span class="n">handle0</span><span class="p">;</span>
<span class="n">handle0</span><span class="p">.</span><span class="n">addOp</span><span class="p">(</span><span class="n">op0</span><span class="p">);</span>
<span class="n">handle0</span><span class="p">.</span><span class="n">setUp</span><span class="p">();</span>

<span class="c1">//----------------- Readin Graph data ---------------------------</span>
<span class="kt">uint32_t</span> <span class="n">numVertices</span><span class="p">;</span>
<span class="kt">uint32_t</span> <span class="n">numEdges</span><span class="p">;</span>
<span class="n">xf</span><span class="o">::</span><span class="n">graph</span><span class="o">::</span><span class="n">Graph</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="p">,</span> <span class="n">DT</span><span class="o">&gt;</span> <span class="n">g</span><span class="p">(</span><span class="s">&quot;CSR&quot;</span><span class="p">,</span> <span class="n">numVertices</span><span class="p">,</span> <span class="n">numEdges</span><span class="p">);</span>

<span class="c1">//----------------- Load Graph ----------------------------------</span>
<span class="p">(</span><span class="n">handle0</span><span class="p">.</span><span class="n">opsp</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">loadGraph</span><span class="p">(</span><span class="n">g</span><span class="p">);</span>

<span class="c1">//---------------- Run L3 API -----------------------------------</span>
<span class="kt">bool</span> <span class="n">weighted</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="kt">uint32_t</span> <span class="n">nSource</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="kt">uint32_t</span> <span class="n">sourceID</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="kt">uint32_t</span> <span class="n">length</span> <span class="o">=</span> <span class="p">((</span><span class="n">numVertices</span> <span class="o">+</span> <span class="mi">1023</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">;</span>
<span class="n">DT</span><span class="o">**</span> <span class="n">result</span><span class="p">;</span>
<span class="kt">uint32_t</span><span class="o">**</span> <span class="n">pred</span><span class="p">;</span>
<span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DT</span><span class="o">*</span><span class="p">[</span><span class="n">nSource</span><span class="p">];</span>
<span class="n">pred</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">uint32_t</span><span class="o">*</span><span class="p">[</span><span class="n">nSource</span><span class="p">];</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nSource</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">xf</span><span class="o">::</span><span class="n">graph</span><span class="o">::</span><span class="n">L3</span><span class="o">::</span><span class="n">aligned_alloc</span><span class="o">&lt;</span><span class="n">DT</span><span class="o">&gt;</span><span class="p">(</span><span class="n">length</span><span class="p">);</span>
    <span class="n">pred</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">xf</span><span class="o">::</span><span class="n">graph</span><span class="o">::</span><span class="n">L3</span><span class="o">::</span><span class="n">aligned_alloc</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">length</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">auto</span> <span class="n">ev</span> <span class="o">=</span> <span class="n">xf</span><span class="o">::</span><span class="n">graph</span><span class="o">::</span><span class="n">L3</span><span class="o">::</span><span class="n">shortestPath</span><span class="p">(</span><span class="n">handle0</span><span class="p">,</span> <span class="n">nSource</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sourceID</span><span class="p">,</span> <span class="n">weighted</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">pred</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">ev</span><span class="p">.</span><span class="n">wait</span><span class="p">();</span>

<span class="c1">//--------------- Free and delete -----------------------------------</span>
<span class="p">(</span><span class="n">handle0</span><span class="p">.</span><span class="n">opsp</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">join</span><span class="p">();</span>
<span class="n">handle0</span><span class="p">.</span><span class="n">free</span><span class="p">();</span>
<span class="n">g</span><span class="p">.</span><span class="n">freeBuffers</span><span class="p">();</span>

<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nSource</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">free</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="n">free</span><span class="p">(</span><span class="n">pred</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="p">}</span>
<span class="k">delete</span><span class="p">[]</span> <span class="n">result</span><span class="p">;</span>
<span class="k">delete</span><span class="p">[]</span> <span class="n">pred</span><span class="p">;</span>
</pre>
</div>
<div class="section" id="asynchronous-execution">
<h2>Asynchronous Execution<a class="headerlink" href="#asynchronous-execution" title="Permalink to this headline">¶</a></h2>
<p>Each API in Graph L3 is implemented in asynchronous mode. So they can receive multi-requests at the same time and if hardware resources are sufficient, different Graph L3 APIs can be executed at the same time. The L3 framework can fully use the hardware resources and achieve high throughput scheduling.</p>
<div class="section" id="example-of-using-multiple-requests">
<h3>Example of using multiple requests<a class="headerlink" href="#example-of-using-multiple-requests" title="Permalink to this headline">¶</a></h3>
<pre class="highlight literal-block">
<span></span><span class="cp">#include</span> <span class="cpf">&quot;xf_graph_L3.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;cstring&gt;</span><span class="cp"></span>

<span class="cp">#define DT float</span>

<span class="c1">//----------------- Setup shortestPathFloat thread -------------</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">opName</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">kernelName</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">requestLoad</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">xclbinPath</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">deviceNeeded</span><span class="p">;</span>

<span class="n">xf</span><span class="o">::</span><span class="n">graph</span><span class="o">::</span><span class="n">L3</span><span class="o">::</span><span class="n">Handle</span><span class="o">::</span><span class="n">singleOP</span> <span class="n">op0</span><span class="p">;</span>
<span class="n">op0</span><span class="p">.</span><span class="n">operationName</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">opName</span><span class="p">.</span><span class="n">c_str</span><span class="p">();</span>
<span class="n">op0</span><span class="p">.</span><span class="n">setKernelName</span><span class="p">((</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">kernelName</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
<span class="n">op0</span><span class="p">.</span><span class="n">requestLoad</span> <span class="o">=</span> <span class="n">requestLoad</span><span class="p">;</span>
<span class="n">op0</span><span class="p">.</span><span class="n">xclbinFile</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">xclbinPath</span><span class="p">.</span><span class="n">c_str</span><span class="p">();</span>
<span class="n">op0</span><span class="p">.</span><span class="n">deviceNeeded</span> <span class="o">=</span> <span class="n">deviceNeeded</span><span class="p">;</span>

<span class="c1">//----------------- Setup pageRank thread -------------</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">opName2</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">kernelName2</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">requestLoad2</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">xclbinPath2</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">deviceNeeded2</span><span class="p">;</span>

<span class="n">xf</span><span class="o">::</span><span class="n">graph</span><span class="o">::</span><span class="n">L3</span><span class="o">::</span><span class="n">Handle</span><span class="o">::</span><span class="n">singleOP</span> <span class="n">op1</span><span class="p">;</span>
<span class="n">op1</span><span class="p">.</span><span class="n">operationName</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">opName2</span><span class="p">.</span><span class="n">c_str</span><span class="p">();</span>
<span class="n">op1</span><span class="p">.</span><span class="n">setKernelName</span><span class="p">((</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">kernelName2</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
<span class="n">op1</span><span class="p">.</span><span class="n">requestLoad</span> <span class="o">=</span> <span class="n">requestLoad2</span><span class="p">;</span>
<span class="n">op1</span><span class="p">.</span><span class="n">xclbinFile</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">xclbinPath2</span><span class="p">.</span><span class="n">c_str</span><span class="p">();</span>
<span class="n">op1</span><span class="p">.</span><span class="n">deviceNeeded</span> <span class="o">=</span> <span class="n">deviceNeeded2</span><span class="p">;</span>

<span class="n">handle0</span><span class="p">.</span><span class="n">addOp</span><span class="p">(</span><span class="n">op1</span><span class="p">);</span>
<span class="n">handle0</span><span class="p">.</span><span class="n">setUp</span><span class="p">();</span>

<span class="c1">//----------------- Readin Graph data ---------------------------</span>
<span class="kt">uint32_t</span> <span class="n">numVertices</span><span class="p">;</span>
<span class="kt">uint32_t</span> <span class="n">numEdges</span><span class="p">;</span>
<span class="n">xf</span><span class="o">::</span><span class="n">graph</span><span class="o">::</span><span class="n">Graph</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="p">,</span> <span class="n">DT</span><span class="o">&gt;</span> <span class="n">g</span><span class="p">(</span><span class="s">&quot;CSR&quot;</span><span class="p">,</span> <span class="n">numVertices</span><span class="p">,</span> <span class="n">numEdges</span><span class="p">);</span>
<span class="kt">uint32_t</span> <span class="n">numVertices2</span><span class="p">;</span>
<span class="kt">uint32_t</span> <span class="n">numEdges2</span><span class="p">;</span>
<span class="n">xf</span><span class="o">::</span><span class="n">graph</span><span class="o">::</span><span class="n">Graph</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="p">,</span> <span class="n">DT</span><span class="o">&gt;</span> <span class="n">g2</span><span class="p">(</span><span class="s">&quot;CSR&quot;</span><span class="p">,</span> <span class="n">numVertices2</span><span class="p">,</span> <span class="n">numEdges2</span><span class="p">);</span>

<span class="c1">//----------------- Load Graph ----------------------------------</span>
<span class="p">(</span><span class="n">handle0</span><span class="p">.</span><span class="n">opsp</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">loadGraph</span><span class="p">(</span><span class="n">g</span><span class="p">);</span>
<span class="p">(</span><span class="n">handle0</span><span class="p">.</span><span class="n">oppg</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">loadGraph</span><span class="p">(</span><span class="n">g2</span><span class="p">);</span>

<span class="c1">//---------------- Run L3 API -----------------------------------</span>
<span class="k">auto</span> <span class="n">ev1</span> <span class="o">=</span> <span class="n">xf</span><span class="o">::</span><span class="n">graph</span><span class="o">::</span><span class="n">L3</span><span class="o">::</span><span class="n">shortestPath</span><span class="p">(</span><span class="n">handle0</span><span class="p">,</span> <span class="n">nSource1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sourceID1</span><span class="p">,</span> <span class="n">weighted1</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">result1</span><span class="p">,</span> <span class="n">pred1</span><span class="p">);</span>
<span class="k">auto</span> <span class="n">ev2</span> <span class="o">=</span> <span class="n">xf</span><span class="o">::</span><span class="n">graph</span><span class="o">::</span><span class="n">L3</span><span class="o">::</span><span class="n">shortestPath</span><span class="p">(</span><span class="n">handle0</span><span class="p">,</span> <span class="n">nSource2</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sourceID2</span><span class="p">,</span> <span class="n">weighted2</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">result2</span><span class="p">,</span> <span class="n">pred2</span><span class="p">);</span>
<span class="k">auto</span> <span class="n">ev3</span> <span class="o">=</span> <span class="n">xf</span><span class="o">::</span><span class="n">graph</span><span class="o">::</span><span class="n">L3</span><span class="o">::</span><span class="n">shortestPath</span><span class="p">(</span><span class="n">handle0</span><span class="p">,</span> <span class="n">nSource3</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sourceID3</span><span class="p">,</span> <span class="n">weighted3</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">result3</span><span class="p">,</span> <span class="n">pred3</span><span class="p">);</span>
<span class="k">auto</span> <span class="n">ev4</span> <span class="o">=</span> <span class="n">xf</span><span class="o">::</span><span class="n">graph</span><span class="o">::</span><span class="n">L3</span><span class="o">::</span><span class="n">shortestPath</span><span class="p">(</span><span class="n">handle0</span><span class="p">,</span> <span class="n">nSource4</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sourceID5</span><span class="p">,</span> <span class="n">weighted4</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">result4</span><span class="p">,</span> <span class="n">pred4</span><span class="p">);</span>
<span class="k">auto</span> <span class="n">ev5</span> <span class="o">=</span> <span class="n">xf</span><span class="o">::</span><span class="n">graph</span><span class="o">::</span><span class="n">L3</span><span class="o">::</span><span class="n">pageRankWeight</span><span class="p">(</span><span class="n">handle0</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="n">maxIter</span><span class="p">,</span> <span class="n">g2</span><span class="p">,</span> <span class="n">pagerank</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">ret1</span> <span class="o">=</span> <span class="n">ev1</span><span class="p">.</span><span class="n">wait</span><span class="p">();</span>
<span class="kt">int</span> <span class="n">ret2</span> <span class="o">=</span> <span class="n">ev2</span><span class="p">.</span><span class="n">wait</span><span class="p">();</span>
<span class="kt">int</span> <span class="n">ret3</span> <span class="o">=</span> <span class="n">ev3</span><span class="p">.</span><span class="n">wait</span><span class="p">();</span>
<span class="kt">int</span> <span class="n">ret4</span> <span class="o">=</span> <span class="n">ev4</span><span class="p">.</span><span class="n">wait</span><span class="p">();</span>
<span class="kt">int</span> <span class="n">ret5</span> <span class="o">=</span> <span class="n">ev5</span><span class="p">.</span><span class="n">wait</span><span class="p">();</span>

<span class="c1">//--------------- Free and delete -----------------------------------</span>
<span class="p">(</span><span class="n">handle0</span><span class="p">.</span><span class="n">opsp</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">join</span><span class="p">();</span>
<span class="p">(</span><span class="n">handle0</span><span class="p">.</span><span class="n">oppg</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">join</span><span class="p">();</span>
<span class="n">handle0</span><span class="p">.</span><span class="n">free</span><span class="p">();</span>
<span class="n">g</span><span class="p">.</span><span class="n">freeBuffers</span><span class="p">();</span>
<span class="n">g2</span><span class="p">.</span><span class="n">freeBuffers</span><span class="p">();</span>
</pre>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../api.html" class="btn btn-neutral float-right" title="API Document" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="getting_started.html" class="btn btn-neutral float-left" title="Getting Started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
															</div>
														</div>
														<div class="col-md-pull-6 col-lg-pull-6 col-md-6 col-lg-6">
															<span class="copyright">
                                  
                                  &copy; 2021, Xilinx Inc.
                              </span>
															<ul class="list-inline sub-menu">
																<li>
																	<a href="https://www.xilinx.com/about/privacy-policy.html">Privacy</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/legal.html">Legal</a>
																</li>
																<li>
																	<a href="https://www.xilinx.com/about/contact.html">Contact</a>
																</li>
															</ul>
														</div>
													</div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
				<div class="quicklinks parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<noindex>
						<span class="quickLinks">
							<ul>
								<li>
									<a href="#top" class="btn backToTop">
									<span class="fas fa-angle-up" aria-hidden="true"></span>
									</a>
								</li>
							</ul>
						</span>
					</noindex>
				</div>
			</div>
		</div>
		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>